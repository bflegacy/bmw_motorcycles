!function(){window.Locomotive={mounted_on:window.Locomotive.mounted_on,Models:{},Collections:{},Views:{}},window.Locomotive.Views.Memberships={}}.call(this),function(){var t;window.Aloha=null!=(t=window.Aloha)?t:window.Aloha={},window.Aloha.settings={logLevels:{error:!0,warn:!0,info:!1,debug:!1},errorhandling:!0,plugins:{format:{config:["b","i","u","del","sub","sup","p","title","h1","h2","h3","h4","h5","h6","pre","removeFormat"],editables:{".editable-short-text":["b","i","u"]}},link:{config:["a"],editables:{".editable-short-text":[]}},list:{config:["ul"],editables:{".editable-short-text":[]}},image:{ui:{insert:!1,crop:!1}}},i18n:{available:["en","fr","pt-BR","es","de","no","ru","nl"]},sidebar:{disabled:!0}}}.call(this),function(){String.prototype.trim=function(){return this.replace(/^\s+/g,"").replace(/\s+$/g,"")},String.prototype.repeat=function(t){for(var e=0,o="";t>e;e++)o+=this;return o},String.prototype.truncate=function(t){return this.length>t?this.slice(0,t-3)+"...":this},String.prototype.slugify=function(t){"undefined"==typeof t&&(t="_");var e=new RegExp("[^\\w\\"+t+"]","g"),o=new RegExp("[\\"+t+"]{2,}","g");return this.replace(/\s/g,t).replace(e,"").replace(o,t).toLowerCase()},window.addParameterToURL=function(t,e,o){"undefined"==typeof o&&(o=document),t=encodeURIComponent(t),e=encodeURIComponent(e);for(var n,i=o.location.search.substr(1).split("&"),r=i.length;r--;)if(n=i[r].split("="),n[0]==t){n[1]=e,i[r]=n.join("=");break}0>r&&(i[i.length]=[t,e].join("=")),o.location.search=i.join("&")},window.addJavascript=function(t,e,o){var n=t.createElement("script");n.type="text/javascript",n.src=e,o&&o.onload&&(n.onload=o.onload,delete o.onload);for(var i in o)n.setAttribute(i,o[i]);t.body.appendChild(n)},window.addStylesheet=function(t,e){var o=t.createElement("link");o.style="text/css",o.href=e,o.media="screen",o.rel="stylesheet",t.head.appendChild(o)},$.ui.dialog.prototype.overlayEl=function(){return this.overlay.$el}}(),$.growl.settings.noticeTemplate='<div class="notice %title%">  <p>%message%</p></div>',$.growl.settings.dockCss={position:"fixed",bottom:"20px",left:"0px",width:"100%",zIndex:5e4},function(){Handlebars.registerHelper("each_with_index",function(t,e){var o,n,i,r,s;for(i="",r=0,s=t.length;s>r;r++)n=t[r],o=t[n],o._index=n,i+=e(o);return i})}.call(this),function(){window.Locomotive.tinyMCE={defaultSettings:{theme:"advanced",skin:"locomotive",plugins:"safari,jqueryinlinepopups,table,locomotive_media,fullscreen",extended_valid_elements:"iframe[width|height|frameborder|allowfullscreen|src|title]",theme_advanced_buttons1:"fullscreen,code,|,bold,italic,strikethrough,|,justifyleft,justifycenter,justifyright,justifyfull,|,bullist,numlist,|,outdent,indent,blockquote,|,link,unlink,|,table,|,locomotive_media",theme_advanced_buttons2:"formatselect,fontselect,fontsizeselect",theme_advanced_buttons3:"",theme_advanced_toolbar_location:"top",theme_advanced_toolbar_align:"left",height:"300",width:"709",convert_urls:!1,fullscreen_new_window:!1,fullscreen_settings:{theme_advanced_path_location:"top"}},minimalSettings:{theme:"advanced",skin:"locomotive",plugins:"safari,jqueryinlinepopups,locomotive_media",theme_advanced_buttons1:"code,|,bold,italic,strikethrough,|,fontselect,fontsizeselect,|,link,unlink,|,locomotive_media",theme_advanced_buttons2:"",theme_advanced_buttons3:"",theme_advanced_toolbar_location:"top",theme_advanced_toolbar_align:"left",height:"20",width:"709",convert_urls:!1},popupSettings:{theme:"advanced",skin:"locomotive",plugins:"safari,jqueryinlinepopups,locomotive_media,fullscreen",extended_valid_elements:"iframe[width|height|frameborder|allowfullscreen|src|title]",theme_advanced_buttons1:"fullscreen,code,|,bold,italic,strikethrough,|,justifyleft,justifycenter,justifyright,justifyfull,|,bullist,numlist,|,outdent,indent,blockquote,|,link,unlink,|,locomotive_media",theme_advanced_buttons2:"formatselect,fontselect,fontsizeselect",theme_advanced_buttons3:"",theme_advanced_toolbar_location:"top",theme_advanced_toolbar_align:"left",height:"300",width:"545",convert_urls:!1,fullscreen_new_window:!1,fullscreen_settings:{theme_advanced_path_location:"top"}}}}.call(this),function(){var t,e,o={}.hasOwnProperty,n=function(t,e){function n(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};Locomotive.Models.Account=function(e){function o(){return t=o.__super__.constructor.apply(this,arguments)}return n(o,e),o.prototype.paramRoot="account",o.prototype.urlRoot=""+Locomotive.mounted_on+"/accounts",o}(Backbone.Model),Locomotive.Models.CurrentAccount=function(t){function o(){return e=o.__super__.constructor.apply(this,arguments)}return n(o,t),o.prototype.url=""+Locomotive.mounted_on+"/my_account",o}(Locomotive.Models.Account)}.call(this),function(){var t,e,o={}.hasOwnProperty,n=function(t,e){function n(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};Locomotive.Models.ContentAsset=function(e){function o(){return t=o.__super__.constructor.apply(this,arguments)}return n(o,e),o.prototype.paramRoot="content_asset",o.prototype.urlRoot=""+Locomotive.mounted_on+"/content_assets",o.prototype.initialize=function(){return this.prepare()},o.prototype.prepare=function(){return this.set({image:"image"===this.get("content_type")}),this},o}(Backbone.Model),Locomotive.Models.ContentAssetsCollection=function(t){function o(){return e=o.__super__.constructor.apply(this,arguments)}return n(o,t),o.prototype.model=Locomotive.Models.ContentAsset,o.prototype.url=""+Locomotive.mounted_on+"/content_assets",o}(Backbone.Collection)}.call(this),function(){var t,e,o={}.hasOwnProperty,n=function(t,e){function n(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};Locomotive.Models.ContentEntry=function(e){function o(){return t=o.__super__.constructor.apply(this,arguments)}return n(o,e),o.prototype.paramRoot="content_entry",o.prototype.urlRoot=""+Locomotive.mounted_on+"/content_types/:slug/entries",o.prototype.initialize=function(){var t=this;return this.urlRoot=this.urlRoot.replace(":slug",this.get("content_type_slug")),_.each(this.get("has_many_custom_fields"),function(e){var o,n;return n=e[0],o=new Locomotive.Models.ContentEntriesCollection(t.get(n)),t.set_attribute(n,o)}),_.each(this.get("many_to_many_custom_fields"),function(e){var o,n;return n=e[0],o=new Locomotive.Models.ContentEntriesCollection(t.get(n)),o.comparator=function(t){return t.get("__position")||0},t.set_attribute(n,o)})},o.prototype.set_attribute=function(t,e){var o;return o={},o[t]=e,this.set(o)},o.prototype.update_attributes=function(t){var e=this;return _.each(t.file_custom_fields,function(o){var n;return n=""+o+"_url",e.set_attribute(n,t[n]),e.set_attribute("remove_"+o,!1)})},o.prototype.toMinJSON=function(){var t=this;return _.tap({},function(e){return _.each(t.attributes,function(t,o){return"id"===o||"_destroy"===o||0===o.indexOf("position_in_")?e[o]=t:void 0})})},o.prototype.toJSON=function(){var t=this;return _.tap(o.__super__.toJSON.apply(this,arguments),function(e){return null===e._slug&&(e._slug=""),_.each(_.keys(e),function(o){return _.include(t.get("safe_attributes"),o)?void 0:delete e[o]}),_.each(t.get("has_many_custom_fields"),function(o){var n;return n=o[0],t.get(n).length>0?e[""+n+"_attributes"]=t.get(n).toMinJSON():void 0}),_.each(t.get("many_to_many_custom_fields"),function(o){var n,i;return n=o[0],i=o[1],e[i]=t.get(n).sort().map(function(t){return t.id})})})},o}(Backbone.Model),Locomotive.Models.ContentEntriesCollection=function(t){function o(){return e=o.__super__.constructor.apply(this,arguments)}return n(o,t),o.prototype.model=Locomotive.Models.ContentEntry,o.prototype.url=""+Locomotive.mounted_on+"/content_types/:slug/entries",o.prototype.toMinJSON=function(){return this.map(function(t){return t.toMinJSON()})},o}(Backbone.Collection)}.call(this),function(){var t,e,o={}.hasOwnProperty,n=function(t,e){function n(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};Locomotive.Models.ContentType=function(e){function o(){return t=o.__super__.constructor.apply(this,arguments)}return n(o,e),o.prototype.paramRoot="content_type",o.prototype.urlRoot=""+Locomotive.mounted_on+"/content_types",o.prototype.initialize=function(){return this._normalize()},o.prototype._normalize=function(){return this.set({entries_custom_fields:new Locomotive.Models.CustomFieldsCollection(this.get("entries_custom_fields"))})},o.prototype.toJSON=function(){var t=this;return _.tap(o.__super__.toJSON.apply(this,arguments),function(e){return delete e.entries_custom_fields,null!=t.get("entries_custom_fields")&&t.get("entries_custom_fields").length>0?e.entries_custom_fields_attributes=t.get("entries_custom_fields").toJSONForSave():void 0})},o}(Backbone.Model),Locomotive.Models.ContentTypesCollection=function(t){function o(){return e=o.__super__.constructor.apply(this,arguments)}return n(o,t),o.prototype.model=Locomotive.Models.ContentType,o.prototype.url=""+Locomotive.mounted_on+"/content_types",o}(Backbone.Collection)}.call(this),function(){var t,e,o={}.hasOwnProperty,n=function(t,e){function n(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};Locomotive.Models.CustomField=function(e){function o(){return t=o.__super__.constructor.apply(this,arguments)}return n(o,e),o.prototype.initialize=function(){return this._normalize(),null==this.get("name")?this.set({name:this.get("label").slugify()}):void 0},o.prototype._normalize=function(){return this.set({select_options:new Locomotive.Models.CustomFieldSelectOptionsCollection(this.get("select_options"))})},o.prototype._undesired_fields=["select_options","type_text","text_formatting_text","inverse_of_text","class_name_text","undefined_text","undefined","created_at","updated_at"],o.prototype._relationship_fields=["class_name","inverse_of","ui_enabled"],o.prototype.is_relationship_type=function(){return _.include(["belongs_to","has_many","many_to_many"],this.get("type"))},o.prototype.toJSONForSave=function(){var t=this;return _.tap({},function(e){var o,n,i;i=t.toJSON();for(o in i)n=i[o],_.include(t._undesired_fields,o)||(_.include(t._relationship_fields,o)?t.is_relationship_type()&&(e[o]=n):e[o]=n);return null!=t.get("select_options")&&t.get("select_options").length>0?e.select_options_attributes=t.get("select_options").toJSONForSave():void 0})},o}(Backbone.Model),Locomotive.Models.CustomFieldsCollection=function(t){function o(){return e=o.__super__.constructor.apply(this,arguments)}return n(o,t),o.prototype.model=Locomotive.Models.CustomField,o.prototype.toJSONForSave=function(){return this.map(function(t){return t.toJSONForSave()})},o}(Backbone.Collection)}.call(this),function(){var t,e,o={}.hasOwnProperty,n=function(t,e){function n(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};Locomotive.Models.CustomFieldSelectOption=function(e){function o(){return t=o.__super__.constructor.apply(this,arguments)}return n(o,e),o.prototype.destroyed=function(){return this.get("_destroy")===!0},o.prototype.toJSONForSave=function(){var t=this;return _.tap({},function(e){var o,n,i,r;i=t.toJSON(),r=[];for(o in i)n=i[o],_.include(["created_at","updated_at"],o)?r.push(void 0):r.push(e[o]=n);return r})},o}(Backbone.Model),Locomotive.Models.CustomFieldSelectOptionsCollection=function(t){function o(){return e=o.__super__.constructor.apply(this,arguments)}return n(o,t),o.prototype.model=Locomotive.Models.CustomFieldSelectOption,o.prototype.toJSONForSave=function(){return this.map(function(t){return t.toJSONForSave()})},o}(Backbone.Collection)}.call(this),function(){var t,e={}.hasOwnProperty,o=function(t,o){function n(){this.constructor=t}for(var i in o)e.call(o,i)&&(t[i]=o[i]);return n.prototype=o.prototype,t.prototype=new n,t.__super__=o.prototype,t};Locomotive.Models.Domain=function(e){function n(){return t=n.__super__.constructor.apply(this,arguments)}return o(n,e),n}(Backbone.Model)}.call(this),function(){var t,e,o={}.hasOwnProperty,n=function(t,e){function n(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};Locomotive.Models.EditableElement=function(e){function o(){return t=o.__super__.constructor.apply(this,arguments)}return n(o,e),o.prototype.toJSONForSave=function(){var t=this;return _.tap({},function(e){var o,n,i;i=t.toJSON();for(o in i)n=i[o],_.include(["id","source","content","remove_source"],o)&&(e[o]=n);return"EditableFile"===t.get("type")?delete e.content:delete e.source})},o}(Backbone.Model),Locomotive.Models.EditableElementsCollection=function(t){function o(){return e=o.__super__.constructor.apply(this,arguments)}return n(o,t),o.prototype.model=Locomotive.Models.EditableElement,o.prototype.blocks=function(){var t;return t=_.uniq(this.map(function(t){return t.get("block_name")})),_.tap([],function(e){return _.each(t,function(t,o){return e.push({name:t,index:o})})})},o.prototype.by_block=function(t){return this.filter(function(e){return e.get("block_name")===t})},o.prototype.toJSONForSave=function(){return this.map(function(t){return t.toJSONForSave()})},o}(Backbone.Collection)}.call(this),function(){var t,e,o={}.hasOwnProperty,n=function(t,e){function n(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};Locomotive.Models.Membership=function(e){function o(){return t=o.__super__.constructor.apply(this,arguments)}return n(o,e),o.prototype.toJSONForSave=function(){var t=this;return _.tap({},function(e){var o,n,i,r;i=t.toJSON(),r=[];for(o in i)n=i[o],_.include(["id","_id","role","_destroy"],o)?r.push(e[o]=n):r.push(void 0);return r})},o}(Backbone.Model),Locomotive.Models.MembershipsCollection=function(t){function o(){return e=o.__super__.constructor.apply(this,arguments)}return n(o,t),o.prototype.model=Locomotive.Models.Membership,o.prototype.toJSONForSave=function(){return this.map(function(t){return t.toJSONForSave()})},o}(Backbone.Collection)}.call(this),function(){var t,e,o={}.hasOwnProperty,n=function(t,e){function n(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};Locomotive.Models.Page=function(e){function o(){return t=o.__super__.constructor.apply(this,arguments)}return n(o,e),o.prototype.paramRoot="page",o.prototype.urlRoot=""+Locomotive.mounted_on+"/pages",o.prototype.initialize=function(){return this._normalize(),this.set({edit_url:""+Locomotive.mounted_on+"/pages/"+this.id+"/edit"})},o.prototype._normalize=function(){return this.set({editable_elements:new Locomotive.Models.EditableElementsCollection(this.get("editable_elements")||[])})},o.prototype.toJSON=function(){var t=this;return _.tap(o.__super__.toJSON.apply(this,arguments),function(e){return _.each(["fullpath","localized_fullpaths","templatized_from_parent","target_klass_name_text","content_type_id_text","edit_url","parent_id_text","response_type_text"],function(t){return delete e[t]}),delete e.editable_elements,null!=t.get("editable_elements")&&t.get("editable_elements").length>0&&(e.editable_elements=t.get("editable_elements").toJSONForSave()),delete e.target_klass_name,t.get("templatized")===!0?e.target_klass_name=t.get("target_klass_name"):void 0})},o}(Backbone.Model),Locomotive.Models.PagesCollection=function(t){function o(){return e=o.__super__.constructor.apply(this,arguments)}return n(o,t),o}(Backbone.Collection)}.call(this),function(){var t,e,o={}.hasOwnProperty,n=function(t,e){function n(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};Locomotive.Models.Site=function(e){function o(){return t=o.__super__.constructor.apply(this,arguments)}return n(o,e),o.prototype.paramRoot="site",o.prototype.urlRoot=""+Locomotive.mounted_on+"/sites",o.prototype.initialize=function(){var t,e;return t=_.map(this.get("domains_without_subdomain"),function(t){return new Locomotive.Models.Domain({name:t})}),e=new Locomotive.Models.MembershipsCollection(this.get("memberships")),this.set({domains:t,memberships:e})},o.prototype.includes_domain=function(t){var e;return e=t.replace(/:[0-9]*/,""),e===this.domain_with_domain()||_.any(this.get("domains"),function(t){return t.get("name")===e})},o.prototype.domain_with_domain=function(){return""+this.get("subdomain")+"."+this.get("domain_name")},o.prototype.toJSON=function(){var t=this;return _.tap(o.__super__.toJSON.apply(this,arguments),function(e){return delete e.memberships,null!=t.get("memberships")&&t.get("memberships").length>0&&(e.memberships_attributes=t.get("memberships").toJSONForSave()),delete e.domains,e.domains=_.map(t.get("domains"),function(t){return t.get("name")})})},o}(Backbone.Model),Locomotive.Models.CurrentSite=function(t){function o(){return e=o.__super__.constructor.apply(this,arguments)}return n(o,t),o.prototype.url=""+Locomotive.mounted_on+"/current_site",o}(Locomotive.Models.Site)}.call(this),function(){var t,e,o={}.hasOwnProperty,n=function(t,e){function n(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};Locomotive.Models.Snippet=function(e){function o(){return t=o.__super__.constructor.apply(this,arguments)}return n(o,e),o.prototype.paramRoot="snippet",o.prototype.urlRoot=""+Locomotive.mounted_on+"/snippets",o}(Backbone.Model),Locomotive.Models.SnippetsCollection=function(t){function o(){return e=o.__super__.constructor.apply(this,arguments)}return n(o,t),o.prototype.model=Locomotive.Models.Snippet,o.prototype.url=""+Locomotive.mounted_on+"/snippets",o}(Backbone.Collection)}.call(this),function(){var t,e,o={}.hasOwnProperty,n=function(t,e){function n(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};Locomotive.Models.ThemeAsset=function(e){function o(){return t=o.__super__.constructor.apply(this,arguments)}return n(o,e),o.prototype.paramRoot="theme_asset",o.prototype.urlRoot=""+Locomotive.mounted_on+"/theme_assets",o}(Backbone.Model),Locomotive.Models.ThemeAssetsCollection=function(t){function o(){return e=o.__super__.constructor.apply(this,arguments)}return n(o,t),o.prototype.model=Locomotive.Models.ThemeAsset,o.prototype.url=""+Locomotive.mounted_on+"/theme_assets",o}(Backbone.Collection)}.call(this),function(){var t,e={}.hasOwnProperty,o=function(t,o){function n(){this.constructor=t}for(var i in o)e.call(o,i)&&(t[i]=o[i]);return n.prototype=o.prototype,t.prototype=new n,t.__super__=o.prototype,t};Locomotive.Views.ApplicationView=function(e){function n(){return t=n.__super__.constructor.apply(this,arguments)}return o(n,e),n.prototype.el="body",n.prototype.render=function(){return this.render_flash_messages(this.options.flash),this.add_submenu_behaviours(),this.center_ui_dialog(),this.enable_sites_picker(),this.enable_content_locale_picker(),null!=this.options.view&&(this.view=new this.options.view(this.options.view_data||{}),this.view.render()),window.Locomotive.tinyMCE.defaultSettings.language=window.locale,window.Locomotive.tinyMCE.minimalSettings.language=window.locale,this},n.prototype.render_flash_messages=function(t){return _.each(t,function(t){return $.growl(t[0],t[1])})},n.prototype.center_ui_dialog=function(){return $(window).resize(function(){return $(".ui-dialog-content:visible").dialog("option","position","center")})},n.prototype.add_submenu_behaviours=function(){var t;return $("#submenu ul li.hoverable").each(function(){var t,e,o;return o=null,t=$(this),(e=t.find(".popup")).removeClass("popup").addClass("submenu-popup").bind("show",function(){return t.find("a").addClass("hover")&e.css({top:t.offset().top+t.height()-2,left:t.offset().left-parseInt(e.css("padding-left"))}).show()}).bind("hide",function(){return t.find("a").removeClass("hover")&$(this).hide()}).bind("mouseleave",function(){return e.trigger("hide")}).bind("mouseenter",function(){return clearTimeout(o)}),$(document.body).append(e),t.hover(function(){return e.trigger("show")},function(){return o=window.setTimeout(function(){return e.trigger("hide")},30)})}),t=$("#submenu > ul").attr("class"),""!==t?$("#submenu > ul > li."+t).addClass("on"):void 0},n.prototype.enable_sites_picker=function(){var t,e,o;return e=this.$("#sites-picker-link"),o=this.$("#sites-picker"),0!==o.size()?(t=e.position().left+e.parent().position().left-(o.width()-e.width()),o.css("left",t),e.bind("click",function(t){return t.stopPropagation()&t.preventDefault(),o.toggle()})):void 0},n.prototype.enable_content_locale_picker=function(){var t,e;return t=this.$("#content-locale-picker-link"),e=this.$("#content-locale-picker"),0!==e.size()?(t.bind("click",function(t){return t.stopPropagation()&t.preventDefault(),e.toggle()}),e.find("li").bind("click",function(){var t;return t=$(this).attr("data-locale"),window.addParameterToURL("content_locale",t)})):void 0},n.prototype.unique_dialog_zindex=function(){var t;return(t=window.Locomotive).jQueryModals||(t.jQueryModals=0),998+window.Locomotive.jQueryModals++},n}(Backbone.View)}.call(this),function(){var t,e,o={}.hasOwnProperty,n=function(t,e){function n(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};(t=Locomotive.Views).ContentAssets||(t.ContentAssets={}),Locomotive.Views.ContentAssets.PickerItemView=function(t){function o(){return e=o.__super__.constructor.apply(this,arguments)}return n(o,t),o.prototype.tagName="li",o.prototype.className="asset",o.prototype.events={"click h4 a, .icon, .image":"select_asset","click a.remove":"remove_asset"},o.prototype.render=function(){return $(this.el).html(ich.content_asset(this.model.toJSON())),this},o.prototype.select_asset=function(t){return t.stopPropagation()&t.preventDefault(),this.on_select(this.model)},o.prototype.on_select=function(){return this.options.parent.options.on_select?this.options.parent.options.on_select(this.model):void 0},o.prototype.remove_asset=function(t){var e;return t.stopPropagation()&t.preventDefault(),e=$(t.target).attr("data-confirm")||$(t.target).parent().attr("data-confirm"),confirm(e)?this.model.destroy():void 0},o}(Backbone.View)}.call(this),function(){var t,e,o={}.hasOwnProperty,n=function(t,e){function n(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};(t=Locomotive.Views).Shared||(t.Shared={}),Locomotive.Views.Shared.AssetPickerView=function(t){function o(){return e=o.__super__.constructor.apply(this,arguments)}return n(o,t),o.prototype.tag="div",o.prototype.initialize=function(){return _.bindAll(this,"add_assets","add_asset","remove_asset"),this.collection.bind("reset",this.add_assets),this.collection.bind("add",this.add_asset),this.collection.bind("remove",this.remove_asset)},o.prototype.render=function(){return $(this.el).html(this.template()()),this.create_dialog(),this},o.prototype.template=function(){},o.prototype.fetch_assets=function(){},o.prototype.build_uploader=function(){},o.prototype.create_dialog=function(){var t=this;return this.dialog||(this.dialog=$(this.el).dialog({autoOpen:!1,modal:!0,zIndex:window.application_view.unique_dialog_zindex(),width:650,create:function(){var e,o,n;return $(t.el).prev().find(".ui-dialog-title").html(t.$("h2").html()),t.$("h2").remove(),e=t.$(".dialog-actions").appendTo($(t.el).parent()).addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),e.find("#close-link").click(function(e){return t.close(e)}),o=e.find("input[type=file]"),n=e.find("#upload-link"),t.build_uploader(o,n)},open:function(){return $(t.el).dialog("overlayEl").bind("click",function(){return t.close()})}}))},o.prototype.open=function(){return $(this.el).dialog("open")},o.prototype.close=function(t){return null!=t&&t.stopPropagation()&t.preventDefault(),$(this.el).dialog("overlayEl").unbind("click"),$(this.el).dialog("close")},o.prototype.shake=function(){return $(this.el).parents(".ui-dialog").effect("shake",{times:4},100)},o.prototype.center=function(){return $(this.el).dialog("option","position","center")},o.prototype.add_assets=function(t){var e=this;return t.each(function(t){return e.add_asset(t,!0)}),this._refresh()},o.prototype.add_asset=function(){},o.prototype.remove_asset=function(){},o.prototype._move_to_last_asset=function(){var t;return t=this.$("ul.list li.clear").position(),null!=t?this.$("ul.list").animate({scrollTop:t.top},100):void 0},o.prototype._refresh=function(){return 0===this.collection.length?this.$("ul.list").hide()&this.$("p.no-items").show():(this.$("p.no-items").hide()&this.$("ul.list").show(),this._on_refresh()),null!=this.dialog?this.center():void 0},o.prototype._on_refresh=function(){},o.prototype._reset=function(){},o}(Backbone.View)}.call(this),function(){var t,e,o={}.hasOwnProperty,n=function(t,e){function n(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};(t=Locomotive.Views).ContentAssets||(t.ContentAssets={}),Locomotive.Views.ContentAssets.PickerView=function(t){function o(){return e=o.__super__.constructor.apply(this,arguments)}return n(o,t),o.prototype.number_items_per_row=4,o.prototype._item_views=[],o.prototype.template=function(){return ich.content_asset_picker},o.prototype.fetch_assets=function(){var t=this;return this._reset(),this.collection.fetch({success:function(){return t.open()}})},o.prototype.build_uploader=function(t,e){var o=this;return e.bind("click",function(e){return e.stopPropagation()&e.preventDefault(),t.click()}),t.bind("change",function(t){return _.each(t.target.files,function(t){var e;return e=new Locomotive.Models.ContentAsset({source:t}),e.save({},{headers:{"X-Flash":!0},success:function(t){return o.collection.add(t.prepare())},error:function(){return o.shake()}})})})},o.prototype.add_asset=function(t,e){var o;return o=new Locomotive.Views.ContentAssets.PickerItemView({model:t,parent:this}),(this._item_views||(this._item_views=[])).push(o),this.$("ul.list .clear").before(o.render().el),this._refresh(),e!==!0?this._move_to_last_asset():void 0},o.prototype.remove_asset=function(t){var e;return e=_.find(this._item_views,function(e){return e.model===t}),null!=e&&e.remove(),this._refresh()},o.prototype._on_refresh=function(){var t;return t=this,this.$("ul.list li.asset").each(function(e){return 0===(e+1)%t.number_items_per_row?$(this).addClass("last"):$(this).removeClass("last")})},o.prototype._reset=function(){return _.each(this._item_views||[],function(t){return t.remove()}),o.__super__._reset.call(this)},o}(Locomotive.Views.Shared.AssetPickerView)}.call(this),function(){var t,e,o={}.hasOwnProperty,n=function(t,e){function n(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};(t=Locomotive.Views).Shared||(t.Shared={}),Locomotive.Views.Shared.FormView=function(t){function o(){return e=o.__super__.constructor.apply(this,arguments)}return n(o,t),o.prototype.el="#content",o.prototype.render=function(){return this.make_title_editable(),this._hide_last_separator(),this.make_inputs_foldable(),this.enable_save_with_keys_combination(),this.enable_form_notifications(),this},o.prototype.save=function(){},o.prototype.save_in_ajax=function(t,e){var o,n,i=this;return t.stopPropagation()&t.preventDefault(),o=$(t.target).trigger("ajax:beforeSend"),this.clear_errors(),e||(e={headers:{},on_success:null,on_error:null}),n=_.clone(this.model.attributes),this.model.save({},{headers:e.headers,silent:!0,success:function(t,i,r){return o.trigger("ajax:complete"),t.attributes=n,e.on_success?e.on_success(i,r):void 0},error:function(t,n){var r;return o.trigger("ajax:complete"),r=JSON.parse(n.responseText),i.show_errors(r),e.on_error?e.on_error():void 0}})},o.prototype.make_title_editable=function(){var t,e;return e=this.$("h2 a.editable"),e.size()>0?(t=this.$("#"+e.attr("rel")),t.parent().hide(),e.click(function(o){var n;return o.stopPropagation()&o.preventDefault(),n=prompt(e.attr("title"),e.html()),n&&""!==n?(e.html(n),t.val(n).trigger("change")):void 0})):void 0},o.prototype.make_inputs_foldable=function(){var t;return t=this,this.$(".formtastic fieldset.foldable.folded ol").hide(),this.$(".formtastic fieldset.foldable legend").click(function(){var e,o;return o=$(this).parent(),e=$(this).next(),o.hasClass("folded")?(o.removeClass("folded"),e.slideDown(100,function(){return t.after_inputs_fold(o)})):e.slideUp(100,function(){return o.addClass("folded")})})},o.prototype.enable_save_with_keys_combination=function(){var t=this;return $.cmd("S",function(){var e;return e=t.$("form input[type=text]:focus, form input[type=password]:focus"),e.size()>0&&e.trigger("change"),t.$("form input[type=submit]").trigger("click")},[],{ignoreCase:!0})},o.prototype.enable_form_notifications=function(){return this.$("form").formSubmitNotification()},o.prototype.after_inputs_fold=function(){},o.prototype.clear_errors=function(){return this.$(".inline-errors").remove()},o.prototype.show_errors=function(t){var e,o,n,i;i=[];for(e in t)n=t[e],_.isString(n[0])?(o=$('<div class="inline-errors"><p>'+n[0]+"</p></div>"),i.push(this.show_error(e,n[0],o))):i.push(this.show_error(e,n));return i},o.prototype.show_error=function(t,e,o){var n,i;return i=this.$("#"+this.model.paramRoot+"_"+t),0===i.size()&&(i=this.$("#"+this.model.paramRoot+"_"+t+"_id")),i.size()>0?(n=i.parent().find(".error-anchor"),0===n.size()&&(n=i),n.after(o)):void 0},o.prototype._enable_checkbox=function(t,e){var o,n=this;return e||(e={}),o=e.model_name||this.model.paramRoot,this.$("li#"+o+"_"+t+"_input input[type=checkbox]").checkToggle({on_callback:function(){return _.each(e.features,function(t){return this.$("li#"+o+"_"+t+"_input").hide()}),null!=e.on_callback&&e.on_callback(),n._hide_last_separator()},off_callback:function(){return _.each(e.features,function(t){return this.$("li#"+o+"_"+t+"_input").show()}),null!=e.off_callback&&e.off_callback(),n._hide_last_separator()}})},o.prototype._hide_last_separator=function(){return _.each(this.$("fieldset"),function(t){return $(t).find("li.last").removeClass("last"),$(_.last($(t).find("li.input:visible"))).addClass("last")})},o}(Backbone.View)}.call(this),function(){var t,e,o={}.hasOwnProperty,n=function(t,e){function n(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};(t=Locomotive.Views).ContentEntries||(t.ContentEntries={}),Locomotive.Views.ContentEntries.FormView=function(t){function o(){return e=o.__super__.constructor.apply(this,arguments)}return n(o,t),o.prototype.el="#content",o.prototype._select_field_view=null,o.prototype._file_field_views=[],o.prototype._has_many_field_views=[],o.prototype._many_to_many_field_views=[],o.prototype.events={submit:"save"},o.prototype.initialize=function(){return this.content_type||(this.content_type=new Locomotive.Models.ContentType(this.options.content_type)),this.model||(this.model=new Locomotive.Models.ContentEntry(this.options.content_entry)),Backbone.ModelBinding.bind(this)},o.prototype.render=function(){return o.__super__.render.call(this),this.enable_checkboxes(),this.enable_datepickers(),this.enable_richtexteditor(),this.enable_select_fields(),this.enable_file_fields(),this.enable_has_many_fields(),this.enable_many_to_many_fields(),this.slugify_label_field(),this},o.prototype.enable_checkboxes=function(){return this.$("li.input.toggle input[type=checkbox]").checkToggle()},o.prototype.enable_datepickers=function(){return this.$("li.input.date input[type=text]").datepicker()},o.prototype.enable_richtexteditor=function(){var t=this;return _.each(this.$("li.input.rte textarea.html"),function(e){var o;return o=_.extend({},t.tinyMCE_settings(),{oninit:function(o){return $.cmd("S",function(){return o.save(),$(e).trigger("changeSilently"),t.$("form").trigger("submit")},[],{ignoreCase:!0,document:o.dom.doc})},onchange_callback:function(t){return t.save(),$(e).trigger("changeSilently")}}),$(e).tinymce(o)})},o.prototype.enable_select_fields=function(){var t=this;return this._select_field_view=new Locomotive.Views.Shared.Fields.SelectView({model:this.content_type}),_.each(this.model.get("select_custom_fields"),function(e){var o;return o=t.$("#"+t.model.paramRoot+"_"+e+"_id_input"),o.append(ich.edit_select_options_button()),o.find("a.edit-options-button").bind("click",function(n){return n.stopPropagation()&n.preventDefault(),t._select_field_view.render_for(e,function(n){var i;
return i=o.find("select"),i.find('option[value!=""]').remove(),_.each(n,function(o){return o.destroyed()?void 0:i.append(new Option(o.get("name"),o.get("id"),!1,o.get("id")===t.model.get(""+e+"_id")))})})})})},o.prototype.enable_file_fields=function(){var t=this;return _.each(this.model.get("file_custom_fields"),function(e){var o;return o=new Locomotive.Views.Shared.Fields.FileView({model:t.model,name:e}),t._file_field_views.push(o),t.$("#"+t.model.paramRoot+"_"+e+"_input label").after(o.render().el)})},o.prototype.enable_has_many_fields=function(){var t=this;return this.model.isNew()?void 0:_.each(this.model.get("has_many_custom_fields"),function(e){var o,n,i,r;return n=e[0],o=e[1],i=new Locomotive.Models.ContentEntry(t.options[""+n+"_new_entry"]),r=new Locomotive.Views.Shared.Fields.HasManyView({model:t.model,name:n,new_entry:i,inverse_of:o}),r.ui_enabled()?(t._has_many_field_views.push(r),t.$("#"+t.model.paramRoot+"_"+n+"_input label").after(r.render().el)):void 0})},o.prototype.enable_many_to_many_fields=function(){var t=this;return _.each(this.model.get("many_to_many_custom_fields"),function(e){var o,n;return o=e[0],n=new Locomotive.Views.Shared.Fields.ManyToManyView({model:t.model,name:o,all_entries:t.options["all_"+o+"_entries"]}),n.ui_enabled()?(t._many_to_many_field_views.push(n),t.$("#"+t.model.paramRoot+"_"+o+"_input label").after(n.render().el)):void 0})},o.prototype.slugify_label_field=function(){return this.$("li.input.highlighted > input[type=text]").slugify({target:this.$("#content_entry__slug")})},o.prototype.refresh_file_fields=function(){return _.each(this._file_field_views,function(t){return t.refresh()})},o.prototype.refresh=function(){return this.$("li.input.toggle input[type=checkbox]").checkToggle("sync"),_.each(this._file_field_views,function(t){return t.refresh()})},o.prototype.reset=function(){return this.$("li.input.string input[type=text], li.input.text textarea, li.input.date input[type=text]").val("").trigger("change"),_.each(this.$("li.input.rte textarea.html"),function(t){return $(t).tinymce().setContent(""),$(t).trigger("change")}),_.each(this._file_field_views,function(t){return t.reset()}),this.$("li.input.toggle input[type=checkbox]").checkToggle("sync")},o.prototype.remove=function(){return this._select_field_view.remove(),_.each(this._file_field_views,function(t){return t.remove()}),_.each(this._has_many_field_views,function(t){return t.remove()}),_.each(this._many_to_many_field_views,function(t){return t.remove()}),o.__super__.remove.apply(this,arguments)},o.prototype.tinyMCE_settings=function(){return window.Locomotive.tinyMCE.defaultSettings},o}(Locomotive.Views.Shared.FormView)}.call(this),function(){var t,e,o=function(t,e){return function(){return t.apply(e,arguments)}},n={}.hasOwnProperty,i=function(t,e){function o(){this.constructor=t}for(var i in e)n.call(e,i)&&(t[i]=e[i]);return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t};(t=Locomotive.Views).ContentEntries||(t.ContentEntries={}),Locomotive.Views.ContentEntries.PopupFormView=function(t){function n(){return this.reset=o(this.reset,this),e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.initialize=function(){return this.create_dialog(),n.__super__.initialize.call(this)},n.prototype.render=function(){return n.__super__.render.call(this),this},n.prototype.save=function(t){var e=this;return this.save_in_ajax(t,{headers:{"X-Flash":!0},on_success:function(t){var o;return o=new Locomotive.Models.ContentEntry(t),e.options.parent_view.insert_or_update_entry(o),e.close()}})},n.prototype.create_dialog=function(){var t=this;return this.dialog=$(this.el).dialog({autoOpen:!1,modal:!0,zIndex:window.application_view.unique_dialog_zindex(),width:770,create:function(){var e;return $(t.el).prev().find(".ui-dialog-title").html(t.$("h2").html()),t.$("h2").remove(),e=t.$(".dialog-actions").appendTo($(t.el).parent()).addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),e.find("#close-link").click(function(e){return t.close(e)}),e.find("input[type=submit]").click(function(e){var o,n;return n=t.el.find("form"),o=$(e.target).parent(),$.rails.disableFormElements(o),n.trigger("submit").bind("ajax:complete",function(){return $.rails.enableFormElements(o)})})},open:function(){return $(t.el).dialog("overlayEl").bind("click",function(){return t.close()})}})},n.prototype.open=function(){var t;return t=$(this.el).parent(),this.model.isNew()?(t.find(".edit-section").hide(),t.find(".new-section").show()):(t.find(".new-section").hide(),t.find(".edit-section").show()),this.clear_errors(),$(this.el).dialog("open")},n.prototype.close=function(t){return null!=t&&t.stopPropagation()&t.preventDefault(),this.clear_errors(),$(this.el).dialog("overlayEl").unbind("click"),$(this.el).dialog("close")},n.prototype.center=function(){return $(this.el).dialog("option","position","center")},n.prototype.reset=function(t){return this.model.set(t.attributes),t.isNew()?(this.model.id=null,n.__super__.reset.call(this)):this.refresh()},n.prototype.slugify_label_field=function(){},n.prototype.enable_has_many_fields=function(){},n.prototype.enable_many_to_many_fields=function(){},n.prototype.tinyMCE_settings=function(){return _.extend({language:window.locale},window.Locomotive.tinyMCE.popupSettings)},n}(Locomotive.Views.ContentEntries.FormView)}.call(this),function(){var t,e,o={}.hasOwnProperty,n=function(t,e){function n(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};(t=Locomotive.Views).ContentEntries||(t.ContentEntries={}),Locomotive.Views.ContentEntries.EditView=function(t){function o(){return e=o.__super__.constructor.apply(this,arguments)}return n(o,t),o.prototype.save=function(t){var e=this;return this.save_in_ajax(t,{on_success:function(t){return e.model.update_attributes(t),e.refresh_file_fields()}})},o}(Locomotive.Views.ContentEntries.FormView)}.call(this),function(){var t,e,o={}.hasOwnProperty,n=function(t,e){function n(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};(t=Locomotive.Views).ContentEntries||(t.ContentEntries={}),Locomotive.Views.ContentEntries.IndexView=function(t){function o(){return e=o.__super__.constructor.apply(this,arguments)}return n(o,t),o.prototype.el="#content",o.prototype.render=function(){return this.make_sortable(),this},o.prototype.make_sortable=function(){var t;return t=this,this.$("ul#entries-list.sortable").sortable({handle:"span.handle",items:"li.item",axis:"y",update:function(){return t.call_sort($(this))}})},o.prototype.call_sort=function(t){return $.rails.ajax({url:t.attr("data-url"),type:"post",dataType:"json",data:{entries:_.map(t.sortable("toArray"),function(t){return t.replace("entry-","")}),_method:"put"},success:this.on_successful_sort,error:this.on_failed_sort})},o.prototype.on_successful_sort=function(t,e,o){return $.growl("success",o.getResponseHeader("X-Message"))},o.prototype.on_failed_sort=function(t,e,o){return $.growl("error",o.getResponseHeader("X-Message"))},o}(Backbone.View)}.call(this),function(){var t,e,o={}.hasOwnProperty,n=function(t,e){function n(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};(t=Locomotive.Views).ContentEntries||(t.ContentEntries={}),Locomotive.Views.ContentEntries.NewView=function(t){function o(){return e=o.__super__.constructor.apply(this,arguments)}return n(o,t),o.prototype.save=function(t){return this.save_in_ajax(t,{on_success:function(t,e){return window.location.href=e.getResponseHeader("location")}})},o}(Locomotive.Views.ContentEntries.FormView)}.call(this),function(){var t,e,o={}.hasOwnProperty,n=function(t,e){function n(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};(t=Locomotive.Views).ContentTypes||(t.ContentTypes={}),Locomotive.Views.ContentTypes.FormView=function(t){function o(){return e=o.__super__.constructor.apply(this,arguments)}return n(o,t),o.prototype.el="#content",o.prototype.events={submit:"save"},o.prototype.initialize=function(){return this.model=new Locomotive.Models.ContentType(this.options.content_type),Backbone.ModelBinding.bind(this)},o.prototype.render=function(){return o.__super__.render.call(this),this.render_custom_fields(),this.slugify_name(),this.enable_liquid_editing(),this.enable_public_submission_checkbox(),this.enable_order_by_toggler(),this},o.prototype.render_custom_fields=function(){return this.custom_fields_view=new Locomotive.Views.ContentTypes.CustomFieldsView({model:this.model,inverse_of_list:this.options.inverse_of_list}),this.$("#custom_fields_input").append(this.custom_fields_view.render().el)},o.prototype.slugify_name=function(){return this.$("#content_type_name").slugify({target:this.$("#content_type_slug"),sep:"_"})},o.prototype.enable_liquid_editing=function(){var t,e=this;return t=this.$("#content_type_raw_item_template"),this.editor=CodeMirror.fromTextArea(t.get()[0],{mode:"liquid",autoMatchParens:!1,lineNumbers:!1,passDelay:50,tabMode:"shift",theme:"default",onChange:function(t){return e.model.set({raw_item_template:t.getValue()})}})},o.prototype.after_inputs_fold=function(){return this.editor.refresh()},o.prototype.enable_public_submission_checkbox=function(){var t=this;return this._enable_checkbox("public_submission_enabled",{on_callback:function(){return t.$("#content_type_public_submission_accounts_input").show()},off_callback:function(){return t.$("#content_type_public_submission_accounts_input").hide()}})},o.prototype.enable_order_by_toggler=function(){var t=this;return this.$("#content_type_order_by_input").bind("change",function(e){var o;return o=t.$("#content_type_order_direction_input"),"_position"===$(e.target).val()?o.hide():o.show()})},o.prototype.show_error=function(t,e,n){var i=this;if("entries_custom_fields"!==t)return o.__super__.show_error.apply(this,arguments);if(!_.isEmpty(e))return _.each(_.keys(e),function(t){var o,r;return r=e[t],"base"===t?(n=$('<div class="inline-errors"><p>'+r[0]+"</p></div>"),i.$("#custom_fields_input .list").after(n)):(o=i.custom_fields_view.find_entry_view(t),null!=o?o.show_error(r[0]):void 0)})},o.prototype.remove=function(){return this.custom_fields_view.remove(),o.__super__.remove.apply(this,arguments)},o}(Locomotive.Views.Shared.FormView)}.call(this),function(){var t,e,o={}.hasOwnProperty,n=function(t,e){function n(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};(t=Locomotive.Views).ContentTypes||(t.ContentTypes={}),Locomotive.Views.ContentTypes.CustomFieldEntryView=function(t){function o(){return e=o.__super__.constructor.apply(this,arguments)}return n(o,t),o.prototype.tagName="li",o.prototype.className="custom-field",o.prototype.events={"click a.toggle":"toggle","click a.remove":"remove"},o.prototype.initialize=function(){var t=this;return this.inverse_of_list=this.options.parent_view.options.inverse_of_list,this.model.bind("change",function(){return t.model.hasChanged("type")&&t.switch_to_type(),t.model.hasChanged("class_name")&&null!=t.model.get("class_name")?t.fetch_inverse_of_list():void 0})},o.prototype.render=function(){return $(this.el).html(ich.custom_field_entry(this.model.toJSON())),this.model.isNew()||this.fetch_inverse_of_list(),Backbone.ModelBinding.bind(this,{all:"class"}),this.make_fields_editable(),this.enable_behaviours(),this.switch_to_type(),this},o.prototype.enable_behaviours=function(){var t;return t=this.$(".required-input input[type=checkbox]"),t.checkToggle({on_label:t.attr("data-on-label"),off_label:t.attr("data-off-label")}),this.$("li.input.toggle input[type=checkbox]").checkToggle(),this.render_select_options_view()},o.prototype.switch_to_type=function(){switch(this.$("li.input.extra").hide(),this.model.get("type")){case"select":return this.$("li.input.select-options").show();case"text":return this.$("li.input.text-formatting").show();case"belongs_to":return this.$("li.input.localized").hide(),this.$("li.input.class-name").show();case"has_many":case"many_to_many":return this.$("li.input.localized").hide(),this.$("li.input.class-name").show(),this.$("li.input.inverse-of").show(),this.$("li.input.ui-enabled").show()}},o.prototype.fetch_inverse_of_list=function(){var t,e=this;return this.$("li.input.inverse-of select option").remove(),t=this.inverse_of_list[this.model.get("type")]||[],_.each(t,function(o){var n;return o.class_name===e.model.get("class_name")?(n=new Option(o.label,o.name,o.name===e.model.get("inverse_of")||1===t.length),e.$("li.input.inverse-of select").append(n)):void 0}),null==this.model.get("inverse_of")&&t.length>0?this.model.set({inverse_of:t[0].name}):void 0},o.prototype.render_select_options_view=function(){return this.select_options_view=new Locomotive.Views.ContentTypes.SelectOptionsView({model:this.model,collection:this.model.get("select_options")}),this.$("#content_type_contents_custom_field_select_options_input").append(this.select_options_view.render().el)},o.prototype.make_fields_editable=function(){return this.$(".label-input input[type=text], .type-input select").editableField()},o.prototype.toggle=function(t){var e;return t.stopPropagation()&t.preventDefault(),e=this.$("ol"),e.is(":hidden")?(this.$("a.toggle").addClass("open"),e.slideDown()):(this.$("a.toggle").removeClass("open"),e.slideUp())},o.prototype.show_error=function(t){var e;return e=$('<span class="inline-errors">'+t+"</span>"),this.$(".required-input").after(e)},o.prototype.remove=function(t){return t.stopPropagation()&t.preventDefault(),confirm($(t.target).attr("data-confirm"))?(this.$(".label-input input[type=text], .type-input select").editableField("destroy"),o.__super__.remove.call(this),this.options.parent_view.remove_entry(this.model,this)):void 0},o}(Backbone.View)}.call(this),function(){var t,e,o={}.hasOwnProperty,n=function(t,e){function n(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};(t=Locomotive.Views).ContentTypes||(t.ContentTypes={}),Locomotive.Views.ContentTypes.CustomFieldsView=function(t){function o(){return e=o.__super__.constructor.apply(this,arguments)}var i;return n(o,t),o.prototype.tagName="div",o.prototype.className="list",i=[],o.prototype.events={"click .new-entry a.add":"add_entry","keypress .new-entry input[type=text]":"add_on_entry_from_enter"},o.prototype.initialize=function(){return _.bindAll(this,"refresh_position_entries")},o.prototype.render=function(){return $(this.el).html(ich.custom_fields_list(this.model.toJSON())),this.render_entries(),this.make_list_sortable(),this},o.prototype.make_list_sortable=function(){return this.sortable_list=this.$("> ul").sortable({handle:".handle",items:"li.custom-field",axis:"y",update:this.refresh_position_entries})},o.prototype.refresh_position_entries=function(){return _.each(this._entry_views,function(t){return t.model.set({position:$(t.el).index()})})},o.prototype.find_entry_view=function(t){return _.find(this._entry_views,function(e){return t.length>3?e.model.id===t:e.model.get("position")===parseInt(t)})},o.prototype.add_entry=function(t){var e,o,n;return t.stopPropagation()&t.preventDefault(),o=this.$("> .new-entry input[name=label]"),n=this.$("> .new-entry select"),""!==o.val()?(e=new Locomotive.Models.CustomField({label:o.val(),type:n.val()}),this.model.get("entries_custom_fields").add(e),this._insert_entry(e),this.$("> .empty").hide(),this.sortable_list.sortable("refresh"),o.val("")):void 0},o.prototype.add_on_entry_from_enter=function(t){return 13===t.keyCode?this.add_entry(t):void 0},o.prototype.remove_entry=function(t,e){return t.isNew()?this.model.get("entries_custom_fields").remove(t):t.set({_destroy:!0}),this._entry_views=_.reject(this._entry_views,function(t){return t===e}),this.refresh_position_entries(),0===this._entry_views.length?this.$("> .empty").show():void 0},o.prototype.render_entries=function(){var t=this;return 0===this.model.get("entries_custom_fields").length?this.$("> .empty").show():this.model.get("entries_custom_fields").each(function(e){return t._insert_entry(e)})},o.prototype._insert_entry=function(t){var e;return e=new Locomotive.Views.ContentTypes.CustomFieldEntryView({model:t,parent_view:this}),(this._entry_views||(this._entry_views=[])).push(e),this.$("> ul").append(e.render().el),this.refresh_position_entries()},o}(Backbone.View)}.call(this),function(){var t,e,o={}.hasOwnProperty,n=function(t,e){function n(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};(t=Locomotive.Views).ContentTypes||(t.ContentTypes={}),Locomotive.Views.ContentTypes.EditView=function(t){function o(){return e=o.__super__.constructor.apply(this,arguments)}return n(o,t),o.prototype.save=function(t){var e=this;return this.save_in_ajax(t,{on_success:function(t){return _.each(t.entries_custom_fields,function(t){var o;return o=e.model.get("entries_custom_fields").detect(function(e){return e.get("name")===t.name}),o.isNew()?o.set({id:t._id,_id:t._id}):void 0})}})},o}(Locomotive.Views.ContentTypes.FormView)}.call(this),function(){var t,e,o={}.hasOwnProperty,n=function(t,e){function n(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};(t=Locomotive.Views).ContentTypes||(t.ContentTypes={}),Locomotive.Views.ContentTypes.NewView=function(t){function o(){return e=o.__super__.constructor.apply(this,arguments)}return n(o,t),o.prototype.save=function(t){return this.save_in_ajax(t,{on_success:function(t,e){return window.location.href=e.getResponseHeader("location")}})},o.prototype.enable_liquid_editing=function(){return!0},o}(Locomotive.Views.ContentTypes.FormView)}.call(this),function(){var t,e,o={}.hasOwnProperty,n=function(t,e){function n(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};(t=Locomotive.Views).ContentTypes||(t.ContentTypes={}),Locomotive.Views.ContentTypes.SelectOptionsView=function(t){function o(){return e=o.__super__.constructor.apply(this,arguments)}return n(o,t),o.prototype.tagName="div",o.prototype.className="list",o.prototype.events={"click a.add":"add_entry","click span.name":"edit_entry","click a.remove":"remove_entry","click a.drag":"do_nothing"},o.prototype.initialize=function(){return _.bindAll(this,"refresh_position_entries","_insert_entry"),this.collection.bind("add",this._insert_entry)},o.prototype.render=function(){return $(this.el).html(ich.select_options_list()),this.prompt_message=this.$("> ul").attr("data-prompt"),this.render_entries(),this.make_list_sortable(),this},o.prototype.render_entries=function(){return this.collection.each(this._insert_entry)},o.prototype.make_list_sortable=function(){return this.sortable_list=this.$("> ul").sortable({handle:"a.drag",items:"li.entry",update:this.refresh_position_entries})},o.prototype.refresh_position_entries=function(){var t=this;return this.$("> ul li.entry").each(function(e,o){var n;return n=t.collection.getByCid($(o).attr("data-cid")),n.set({position:e})})},o.prototype.do_nothing=function(t){return t.stopPropagation()&t.preventDefault()},o.prototype.add_entry=function(t){var e;return t.stopPropagation()&t.preventDefault(),e=prompt(this.prompt_message),""!==e?this.collection.add([{name:e}]):void 0},o.prototype.edit_entry=function(t){var e,o,n,i;return t.stopPropagation()&t.preventDefault(),n=$(t.target),i=n.closest("li"),o=this.collection.getByCid(i.attr("data-cid")),""!==(e=prompt(this.prompt_message,o.get("name")))?(o.set({name:e}),n.html(e)):void 0},o.prototype.remove_entry=function(t){var e,o,n;return t.stopPropagation()&t.preventDefault(),e=$(t.target),n=e.closest("li"),o=this.collection.getByCid(n.attr("data-cid")),confirm(e.attr("data-confirm"))?(o.isNew()?this.collection.remove(o):o.set({_destroy:!0}),n.remove()):void 0},o.prototype._insert_entry=function(t){var e;return e=ich.select_option_entry(t.toJSON()),e.attr("data-cid",t.cid),this.$("> ul").append(e),this.refresh_position_entries},o}(Backbone.View)}.call(this),function(){var t,e,o={}.hasOwnProperty,n=function(t,e){function n(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};(t=Locomotive.Views).Sites||(t.Sites={}),Locomotive.Views.Sites.DomainsView=function(t){function o(){return e=o.__super__.constructor.apply(this,arguments)}var i;return n(o,t),o.prototype.tagName="div",o.prototype.className="list",i=[],o.prototype.events={"click .new-entry a.add":"add_entry","keypress .new-entry input[type=text]":"add_on_entry_from_enter"},o.prototype.render=function(){return $(this.el).html(ich.domains_list(this.model.toJSON())),this.render_entries(),this.enable_ui_effects(),this},o.prototype.add_entry=function(t){var e,o;return t.stopPropagation()&t.preventDefault(),o=this.$(".new-entry input[name=domain]"),""!==o.val()?(e=new Locomotive.Models.Domain({name:o.val()}),this.model.get("domains").push(e),this._insert_entry(e),this.$("ul li.domain:last input[type=text]").editableField(),this.$(".empty").hide(),o.val("")):void 0},o.prototype.add_on_entry_from_enter=function(t){return 13===t.keyCode?this.add_entry(t):void 0},o.prototype.change_entry=function(t,e){return t.set({name:e})},o.prototype.remove_entry=function(t){var e;return e=_.reject(this.model.get("domains"),function(e){return e===t}),this.model.set({domains:e}),0===this.model.get("domains").length?this.$(".empty").show():void 0},o.prototype.render_entries=function(){var t=this;return 0===this.model.get("domains").length?this.$(".empty").show():(_.each(this.model.get("domains"),function(e){return t._insert_entry(e)}),this.show_errors())},o.prototype.show_errors=function(){var t=this;return _.each(this.options.errors.domain||[],function(e){return t.show_error(e)})},o.prototype.show_error=function(t){return _.each(this._entry_views||[],function(e){var o;return new RegExp("^"+e.model.get("name")).test(t)?(o=$("<span></span>").addClass("inline-errors").html(t),e.$("input[type=text].path").after(o)):void 0})},o.prototype.enable_ui_effects=function(){return this.$(".domain input[type=text]").editableField()},o.prototype._insert_entry=function(t){var e;return e=new Locomotive.Views.Sites.DomainEntryView({model:t,parent_view:this}),(this._entry_views||(this._entry_views=[])).push(e),this.$("ul").append(e.render().el)},o}(Backbone.View)}.call(this),function(){var t,e,o={}.hasOwnProperty,n=function(t,e){function n(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};(t=Locomotive.Views).CurrentSite||(t.CurrentSite={}),Locomotive.Views.CurrentSite.EditView=function(t){function o(){return e=o.__super__.constructor.apply(this,arguments)}return n(o,t),o.prototype.el="#content",o.prototype.events={submit:"save"},o.prototype.initialize=function(){return this.model=new Locomotive.Models.CurrentSite(this.options.site),Backbone.ModelBinding.bind(this,{checkbox:"class"})},o.prototype.render=function(){return o.__super__.render.call(this),this.add_toggle_mode_for_locales(),this.make_locales_sortable(),this.render_domains(),this.render_memberships(),this.enable_liquid_editing()},o.prototype.add_toggle_mode_for_locales=function(){return this.$("#site_locales_input .list input[type=checkbox]").bind("change",function(t){var e;return e=$(t.target),e.is(":checked")?e.closest(".entry").addClass("selected"):e.closest(".entry").removeClass("selected")})},o.prototype.make_locales_sortable=function(){var t=this;return this.sortable_locales_list=this.$("#site_locales_input .list").sortable({items:".entry",tolerance:"pointer",update:function(){var e;return e=_.map(t.$("#site_locales_input .list input:checked"),function(t){return $(t).val()}),t.model.set({locales:e})}})},o.prototype.render_domains=function(){return this.domains_view=new Locomotive.Views.Sites.DomainsView({model:this.model,errors:this.options.errors}),this.$("#site_domains_input label").after(this.domains_view.render().el)},o.prototype.render_memberships=function(){return this.memberships_view=new Locomotive.Views.Sites.MembershipsView({model:this.model}),this.$("#site_memberships_input").append(this.memberships_view.render().el)},o.prototype.enable_liquid_editing=function(){var t,e=this;return $("#site_robots_txt").length?(t=this.$("#site_robots_txt"),this.editor=CodeMirror.fromTextArea(t.get()[0],{mode:"liquid",autoMatchParens:!1,lineNumbers:!1,passDelay:50,tabMode:"shift",theme:"default",onChange:function(t){return e.model.set({robots_txt:t.getValue()})}})):void 0},o.prototype.save=function(t){return this.model.includes_domain(window.location.host)?this.save_in_ajax(t):void 0},o.prototype.show_error=function(t,e){return"domains"===t?this.domains_view.show_error(e):o.__super__.show_error.apply(this,arguments)},o.prototype.after_inputs_fold=function(){return this.editor.refresh()},o.prototype.remove=function(){return this.domains_view.remove(),this.memberships_view.remove(),o.__super__.remove.apply(this,arguments)},o}(Locomotive.Views.Shared.FormView)}.call(this),function(){var t,e,o={}.hasOwnProperty,n=function(t,e){function n(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};(t=Locomotive.Views).EditableElements||(t.EditableElements={}),Locomotive.Views.EditableElements.ControlView=function(t){function o(){return e=o.__super__.constructor.apply(this,arguments)}return n(o,t),o.prototype.tagName="li",o.prototype.className="control input",o.prototype.render=function(){return $(this.el).html(ich.editable_control_input(this.model.toJSON())),this.bind_model(),this},o.prototype.after_render=function(){},o.prototype.refresh=function(){return this.bind_model()},o.prototype.bind_model=function(){return Backbone.ModelBinding.bind(this,{select:"class"})},o}(Backbone.View)}.call(this),function(){var t,e,o={}.hasOwnProperty,n=function(t,e){function n(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};(t=Locomotive.Views).EditableElements||(t.EditableElements={}),Locomotive.Views.EditableElements.EditAllView=function(t){function o(){return e=o.__super__.constructor.apply(this,arguments)}return n(o,t),o.prototype.id="editable-elements",o.prototype.tagName="div",o.prototype._editable_elements_views=[],o.prototype.render=function(){return window.bar=this,this.collection.isEmpty()?$(this.el).hide():(this.blocks=this.collection.blocks(),$(this.el).html(ich.editable_elements_edit({blocks:this.blocks})),this.render_elements(),this.enable_nav()),this},o.prototype.after_render=function(){return _.each(this._editable_elements_views,function(t){return t.after_render()})},o.prototype.refresh=function(){var t=this;return _.each(this._editable_elements_views,function(e){return e.model=t.collection.get(e.model.get("id")),e.refresh()})},o.prototype.unbind_model=function(){return _.each(this._editable_elements_views,function(t){return Backbone.ModelBinding.unbind(t)})},o.prototype.render_elements=function(){var t,e=this;return t=0,_.each(this.blocks,function(o){var n;return n=e.collection.by_block(o.name),_.each(n,function(n){var i,r;return n.set({index:t}),r=function(){switch(n.get("type")){case"EditableShortText":return Locomotive.Views.EditableElements.ShortTextView;case"EditableLongText":return Locomotive.Views.EditableElements.LongTextView;case"EditableFile":return Locomotive.Views.EditableElements.FileView;case"EditableControl":return Locomotive.Views.EditableElements.ControlView}}(),i=new r({model:n}),e.$("#block-"+o.index+" > fieldset > ol").append(i.render().el),e._editable_elements_views.push(i),t+=1})})},o.prototype.enable_nav=function(){var t=this;return this.$(".nav a").click(function(e){var o,n;return e.stopPropagation()&e.preventDefault(),n=$(e.target),o=parseInt(n.attr("href").match(/block-(.+)/)[1]),t.$(".wrapper ul li.block").hide(),t.$("#block-"+o).show(),t._hide_last_separator(),n.parent().find(".on").removeClass("on"),n.addClass("on")})},o.prototype._hide_last_separator=function(){return _.each(this.$("fieldset"),function(t){return $(t).find("li.last").removeClass("last"),$(_.last($(t).find("li.input:visible"))).addClass("last")})},o.prototype.remove=function(){return _.each(this._editable_elements_views,function(t){return t.remove()}),this._editable_elements_views.length=0,o.__super__.remove.apply(this,arguments)},o}(Backbone.View)}.call(this),function(){var t,e,o={}.hasOwnProperty,n=function(t,e){function n(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};(t=Locomotive.Views).EditableElements||(t.EditableElements={}),Locomotive.Views.EditableElements.FileView=function(t){function o(){return e=o.__super__.constructor.apply(this,arguments)}return n(o,t),o.prototype.tagName="li",o.prototype.className="file input",o.prototype.states={change:!1,"delete":!1},o.prototype.events={"click a.change":"toggle_change","click a.delete":"toggle_delete"},o.prototype.render=function(){var t=this;return $(this.el).html(ich.editable_file_input(this.model.toJSON())),this.$("input[type=file]").bind("change",function(e){var o;return o=$(e.target)[0],null!=o.files?t.model.set({source:o.files[0]}):void 0}),this},o.prototype.after_render=function(){},o.prototype.refresh=function(){return this.$("input[type=file]").unbind("change"),this.states={change:!1,"delete":!1},this.render()},o.prototype.toggle_change=function(t){var e=this;return this._toggle(t,"change",{on_change:function(){return e.$("a:first").hide()&e.$("input[type=file]").show()&e.$("a.delete").hide()},on_cancel:function(){return e.model.set({source:null}),e.$("a:first").show()&e.$("input[type=file]").val("").hide()&e.$("a.delete").show()}})},o.prototype.toggle_delete=function(t){var e=this;return this._toggle(t,"delete",{on_change:function(){return e.$("a:first").addClass("deleted")&e.$("a.change").hide(),e.$("input[type=hidden].remove-flag").val("1"),e.model.set({remove_source:!0})},on_cancel:function(){return e.$("a:first").removeClass("deleted")&e.$("a.change").show(),e.$("input[type=hidden].remove-flag").val("0"),e.model.set({remove_source:!1})}})},o.prototype._toggle=function(t,e,o){var n,i;return t.stopPropagation()&t.preventDefault(),n=$(t.target),i=n.attr("data-alt-label"),this.states[e]?o.on_cancel():o.on_change(),n.attr("data-alt-label",n.html()),n.html(i),this.states[e]=!this.states[e]},o.prototype.remove=function(){return this.$("input[type=file]").unbind("change"),o.__super__.remove.apply(this,arguments)},o}(Backbone.View)}.call(this),function(){var t,e,o={}.hasOwnProperty,n=function(t,e){function n(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};(t=Locomotive.Views).EditableElements||(t.EditableElements={}),Locomotive.Views.EditableElements.ShortTextView=function(t){function o(){return e=o.__super__.constructor.apply(this,arguments)}return n(o,t),o.prototype.tagName="li",o.prototype.className="text input short",o.prototype.render=function(){var t=this;return $(this.el).html(ich.editable_text_input(this.model.toJSON())),this.$("textarea").bind("keyup",function(e){var o;return o=$(e.target),t.model.set({content:o.val()})}),this},o.prototype.after_render=function(){},o.prototype.refresh=function(){},o}(Backbone.View)}.call(this),function(){var t,e,o={}.hasOwnProperty,n=function(t,e){function n(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};(t=Locomotive.Views).EditableElements||(t.EditableElements={}),Locomotive.Views.EditableElements.LongTextView=function(t){function o(){return e=o.__super__.constructor.apply(this,arguments)}return n(o,t),o.prototype.tagName="li",o.prototype.className="text input html",o.prototype.render=function(){return $(this.el).html(ich.editable_text_input(this.model.toJSON())),this},o.prototype.after_render=function(){var t,e=this;return t=_.extend({},this.tinymce_settings(),{oninit:function(t){return $.cmd("S",function(){return e.model.set({content:t.getBody().innerHTML}),$(e.el).parents("form").trigger("submit")},[],{ignoreCase:!0,document:t.dom.doc})},onchange_callback:function(t){return e.model.set({content:t.getBody().innerHTML})}}),this.$("textarea").tinymce(t)},o.prototype.tinymce_settings=function(){return _.extend({language:window.locale},window.Locomotive.tinyMCE.defaultSettings)
},o.prototype.refresh=function(){},o.prototype.remove=function(){return this.$("textarea").tinymce().destroy(),o.__super__.remove.apply(this,arguments)},o}(Backbone.View)}.call(this),function(){var t,e,o={}.hasOwnProperty,n=function(t,e){function n(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};(t=Locomotive.Views).InlineEditor||(t.InlineEditor={}),Locomotive.Views.InlineEditor.ApplicationView=function(t){function o(){return e=o.__super__.constructor.apply(this,arguments)}return n(o,t),o.prototype.el="body",o.prototype.initialize=function(){return o.__super__.initialize.apply(this,arguments),this.iframe=this.$("#page iframe"),_.bindAll(this,"_$"),this.toolbar_view=new Locomotive.Views.InlineEditor.ToolbarView({target:this.iframe}),this.content_assets_picker_view=new Locomotive.Views.ContentAssets.PickerView({collection:new Locomotive.Models.ContentAssetsCollection})},o.prototype.render=function(){return o.__super__.render.apply(this,arguments),this.enable_iframe_autoheight(),this.toolbar_view.render(),this.content_assets_picker_view.render()},o.prototype.enable_iframe_autoheight=function(){var t,e=this;return t=this.iframe,t.load(function(){var o;return e._$("meta[name=inline-editor]").size()>0?(o=t.contents(),o.resize(function(){var e;return e=$(this),e.outerHeight(!0)>t.outerHeight(!0)?t.css({height:e.outerHeight(!0)}):void 0}),o.resize()):(e.toolbar_view.show_status("disabled",!0).hide_editing_mode_block(),e.enhance_iframe_links())})},o.prototype.set_page=function(t){return this.page=new Locomotive.Models.Page(t),this.toolbar_view.model=this.page,this.enhance_iframe(),this.toolbar_view.refresh()},o.prototype.enhance_iframe=function(){var t,e=this;return t=this.iframe[0].contentWindow,t.Aloha.settings.locale=window.locale,window.document.title=t.document.title,this.enhance_iframe_links(t.Aloha.jQuery),t.Aloha.bind("aloha-editable-deactivated",function(t,o){return e.toolbar_view.notify(o.editable)})},o.prototype.enhance_iframe_links=function(t){var e;return e=this.toolbar_view,t||(t=this._$),t("a").each(function(){var o,n;return o=t(this),n=o.attr("href"),null!=n&&0!==n.indexOf("#")&&null===/^(www|http)/.exec(n)&&null===/(\/_edit)$/.exec(n)&&null===/^\/sites\//.exec(n)?("/"===n&&(n="/index"),n.indexOf("_edit")>0||(n.indexOf("?")>0?o.attr("href",n.replace("?","/_edit?")):o.attr("href",""+n+"/_edit")),o.bind("click",function(){return e.show_status("loading"),window.history.pushState("Object","Title",o.attr("href").replace("_edit","_admin"))})):void 0})},o.prototype.unique_dialog_zindex=function(){var t;return(t=window.Locomotive).jQueryModals||(t.jQueryModals=0),1050+window.Locomotive.jQueryModals++},o.prototype._$=function(t){return $(t,this.iframe[0].contentWindow.document)},o}(Backbone.View)}.call(this),function(){var t,e,o={}.hasOwnProperty,n=function(t,e){function n(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};(t=Locomotive.Views).InlineEditor||(t.InlineEditor={}),Locomotive.Views.InlineEditor.ToolbarView=function(t){function o(){return e=o.__super__.constructor.apply(this,arguments)}return n(o,t),o.prototype.el="#toolbar .inner",o.prototype.events={"change .editing-mode input[type=checkbox]":"toggle_editing_mode","click  .back a":"back","click  .element-actions a.save":"save_changes","click  .element-actions a.cancel":"cancel_changes"},o.prototype.render=function(){return o.__super__.render.apply(this,arguments),this.enable_editing_mode_checkbox(),this.enable_content_locale_picker(),this},o.prototype.notify=function(t){var e;return e=t.obj.attr("data-element-id"),this.model.get("editable_elements").get(e).set({content:t.getContents()}),this.$(".element-actions").show(),this.hide_editing_mode_block()},o.prototype.show_status=function(t,e){var o;return e||(e=!1),o=this.$("h1").attr("data-"+t+"-status"),this.$("h1").html(o).removeClass().addClass(t),e&&$.growl("error",o),this},o.prototype.save_changes=function(t){var e,o=this;return t.stopPropagation()&t.preventDefault(),e=_.clone(this.model.attributes),this.model.save({},{success:function(t){return t.attributes=e,o.$(".element-actions").hide(),o.show_editing_mode_block()},error:function(){return o.$(".element-actions").hide()}})},o.prototype.cancel_changes=function(t){return t.stopPropagation()&t.preventDefault(),this.options.target[0].contentWindow.location.href=this.options.target[0].contentWindow.location.href},o.prototype.back=function(t){return t.stopPropagation()&t.preventDefault(),window.location.href=this.model?this.model.get("edit_url"):window.Locomotive.mounted_on+"/pages"},o.prototype.show_editing_mode_block=function(){return this.$(".editing-mode").show()},o.prototype.hide_editing_mode_block=function(){return this.$(".editing-mode").hide()},o.prototype.toggle_editing_mode=function(t){return null!==this.editable_elements()?$(t.target).is(":checked")?this.editable_elements().aloha():this.editable_elements().removeClass("aloha-editable-highlight").mahalo():void 0},o.prototype.editable_elements=function(){return this.options.target[0].contentWindow.Aloha?this.options.target[0].contentWindow.Aloha.jQuery(".editable-long-text, .editable-short-text"):null},o.prototype.enable_editing_mode_checkbox=function(){return this.$(".editing-mode input[type=checkbox]").checkToggle({on_label_color:"#fff",off_label_color:"#bbb"})},o.prototype.enable_content_locale_picker=function(){var t,e,o,n=this;return o=this.options.target[0].contentWindow,t=this.$("#content-locale-picker-link"),e=$("#content-locale-picker"),0!==e.size()?(t.bind("click",function(t){return t.stopPropagation()&t.preventDefault(),e.toggle()}),e.find("li").bind("click",function(i){var r,s;return r=n.get_locale_attributes(t),s=n.get_locale_attributes($(i.target).closest("li")),n.set_locale_attributes(t,s),n.set_locale_attributes($(i.target).closest("li"),r),e.toggle(),window.content_locale=s[1],o.location.href="/"+n.model.get("localized_fullpaths")[s[1]]+"/_edit"})):void 0},o.prototype.get_locale_attributes=function(t){return[t.find("img").attr("src"),t.find("span.text").html()]},o.prototype.set_locale_attributes=function(t,e){return t.find("img").attr("src",e[0]),t.find("span.text").html(e[1])},o.prototype.refresh=function(){return this.$("h1").html(this.model.get("title")).removeClass(),this.$(".editing-mode input[type=checkbox]").is(":checked")&&this.$(".editing-mode div.switchArea").trigger("click"),this.$(".element-actions").hide(),this.show_editing_mode_block()},o}(Backbone.View)}.call(this),function(){var t,e,o={}.hasOwnProperty,n=function(t,e){function n(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};(t=Locomotive.Views).MyAccount||(t.MyAccount={}),Locomotive.Views.MyAccount.EditView=function(t){function o(){return e=o.__super__.constructor.apply(this,arguments)}return n(o,t),o.prototype.el="#content",o.prototype.events={submit:"save"},o.prototype.initialize=function(){return this.model=new Locomotive.Models.CurrentAccount(this.options.account),Backbone.ModelBinding.bind(this)},o.prototype.render=function(){return o.__super__.render.call(this)},o.prototype.save=function(t){return this.model.get("locale")===window.locale?this.save_in_ajax(t):void 0},o}(Locomotive.Views.Shared.FormView)}.call(this),function(){var t,e,o={}.hasOwnProperty,n=function(t,e){function n(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};(t=Locomotive.Views).Pages||(t.Pages={}),Locomotive.Views.Pages.FormView=function(t){function o(){return e=o.__super__.constructor.apply(this,arguments)}return n(o,t),o.prototype.el="#content",o.prototype.events={"change   #page_parent_id":"change_page_url","click    a#image-picker-link":"open_image_picker",submit:"save"},o.prototype.initialize=function(){return _.bindAll(this,"insert_image"),this.model=new Locomotive.Models.Page(this.options.page),this.touched_url=!1,this.image_picker_view=new Locomotive.Views.ThemeAssets.ImagePickerView({collection:new Locomotive.Models.ThemeAssetsCollection,on_select:this.insert_image}),this.image_picker_view.render(),Backbone.ModelBinding.bind(this),this.editable_elements_view=new Locomotive.Views.EditableElements.EditAllView({collection:this.model.get("editable_elements")})},o.prototype.render=function(){return o.__super__.render.call(this),this.slugify_title(),this.listen_for_url_changes(),this.enable_response_type_select(),this.enable_templatized_checkbox(),this.enable_redirect_checkbox(),this.enable_other_checkboxes(),this.enable_liquid_editing(),this.render_editable_elements(),this},o.prototype.open_image_picker=function(t){return t.stopPropagation()&t.preventDefault(),this.image_picker_view.editor=this.editor,this.image_picker_view.fetch_assets()},o.prototype.insert_image=function(t){var e;return e="{{ '"+t+"' | theme_image_url }}",this.editor.replaceSelection(e),this.image_picker_view.close()},o.prototype.enable_liquid_editing=function(){var t,e=this;return t=this.$("#page_raw_template"),t.size()>0?this.editor=CodeMirror.fromTextArea(t.get()[0],{mode:"liquid",autoMatchParens:!1,lineNumbers:!1,passDelay:50,tabMode:"shift",theme:"default",onChange:function(t){return e.model.set({raw_template:t.getValue()})}}):void 0},o.prototype.after_inputs_fold=function(){return this.editor.refresh()},o.prototype.render_editable_elements=function(){return this.$(".formtastic fieldset.inputs:first").before(this.editable_elements_view.render().el),this.editable_elements_view.after_render()},o.prototype.reset_editable_elements=function(){return this.editable_elements_view.remove(),this.editable_elements_view.collection=this.model.get("editable_elements"),this.render_editable_elements()},o.prototype.refresh_editable_elements=function(){return this.editable_elements_view.unbind_model(),this.editable_elements_view.collection=this.model.get("editable_elements"),this.editable_elements_view.refresh()},o.prototype.slugify_title=function(){var t=this;return this.$("#page_title").slugify({target:this.$("#page_slug")}),this.$("#page_slug").bind("change",function(){return t.touched_url=!0})},o.prototype.listen_for_url_changes=function(){var t=this;return setInterval(function(){return t.touched_url?t.change_page_url()&(t.touched_url=!1):void 0},2e3)},o.prototype.change_page_url=function(){var t=this;return $.rails.ajax({url:this.$("#page_slug").attr("data-url"),type:"get",dataType:"json",data:{parent_id:this.$("#page_parent_id").val(),slug:this.$("#page_slug").val()},success:function(e){return t.$("#page_slug_input .inline-hints").html(e.url).effect("highlight"),e.templatized_parent?(t.$("li#page_slug_input").show(),t.$("li#page_templatized_input, li#page_target_klass_name_input").hide()):t.model.get("redirect")?void 0:t.$("li#page_templatized_input").show()}})},o.prototype.enable_response_type_select=function(){var t=this;return this.$("li#page_response_type_input").change(function(e){return"text/html"===$(e.target).val()?t.$("li#page_redirect_input, li#page_redirect_url_input").show():(t.model.set({redirect:!1}),t.$("li#page_redirect_input, li#page_redirect_url_input").hide())})},o.prototype.enable_templatized_checkbox=function(){var t=this;return this._enable_checkbox("templatized",{features:["slug","redirect","listed"],on_callback:function(){return t.$("li#page_target_klass_name_input").show()},off_callback:function(){return t.$("li#page_target_klass_name_input").hide()}}),this.model.get("templatized_from_parent")===!0?this.$("li#page_templatized_input").hide():void 0},o.prototype.enable_redirect_checkbox=function(){var t=this;return this._enable_checkbox("redirect",{features:["templatized","cache_strategy"],on_callback:function(){return t.$("li#page_redirect_url_input").show()},off_callback:function(){return t.$("li#page_redirect_url_input").hide()}})},o.prototype.enable_other_checkboxes=function(){var t=this;return _.each(["published","listed"],function(e){return t.$("li#page_"+e+"_input input[type=checkbox]").checkToggle()})},o}(Locomotive.Views.Shared.FormView)}.call(this),function(){var t,e,o={}.hasOwnProperty,n=function(t,e){function n(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};(t=Locomotive.Views).Pages||(t.Pages={}),Locomotive.Views.Pages.EditView=function(t){function o(){return e=o.__super__.constructor.apply(this,arguments)}return n(o,t),o.prototype.save=function(t){var e,o=this;return t.stopPropagation()&t.preventDefault(),e=$(t.target).trigger("ajax:beforeSend"),this.clear_errors(),this.model.save({},{success:function(t){return e.trigger("ajax:complete"),t._normalize(),t.get("template_changed")===!0?o.reset_editable_elements():o.refresh_editable_elements(),o.$("#local-actions-bar > a.show").attr("href","/"+o.model.get("fullpath"))},error:function(t,n){var i;return e.trigger("ajax:complete"),i=JSON.parse(n.responseText),o.show_errors(i)}})},o}(Locomotive.Views.Pages.FormView)}.call(this),function(){var t,e,o={}.hasOwnProperty,n=function(t,e){function n(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};(t=Locomotive.Views).Pages||(t.Pages={}),Locomotive.Views.Pages.IndexView=function(t){function o(){return e=o.__super__.constructor.apply(this,arguments)}return n(o,t),o.prototype.el="#content",o.prototype.render=function(){return this.index_view=new Locomotive.Views.Pages.ListView,this.index_view.render(),this},o}(Backbone.View)}.call(this),function(){var t,e,o={}.hasOwnProperty,n=function(t,e){function n(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};(t=Locomotive.Views).Pages||(t.Pages={}),Locomotive.Views.Pages.ListView=function(t){function o(){return e=o.__super__.constructor.apply(this,arguments)}return n(o,t),o.prototype.el="#pages-list",o.prototype.render=function(){return this.make_foldable(),this.make_sortable(),this},o.prototype.make_foldable=function(){return this.$("ul.folder img.toggler").toggleMe()},o.prototype.make_sortable=function(){var t;return t=this,this.$("ul.folder").sortable({handle:"em",axis:"y",update:function(){return t.call_sort($(this))}})},o.prototype.call_sort=function(t){return $.rails.ajax({url:t.attr("data-url"),type:"post",dataType:"json",data:{children:_.map(t.sortable("toArray"),function(t){return t.replace("item-","")}),_method:"put"},success:this.on_successful_sort,error:this.on_failed_sort})},o.prototype.on_successful_sort=function(t,e,o){return $.growl("success",o.getResponseHeader("X-Message"))},o.prototype.on_failed_sort=function(t,e,o){return $.growl("error",o.getResponseHeader("X-Message"))},o}(Backbone.View)}.call(this),function(){var t,e,o={}.hasOwnProperty,n=function(t,e){function n(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};(t=Locomotive.Views).Pages||(t.Pages={}),Locomotive.Views.Pages.NewView=function(t){function o(){return e=o.__super__.constructor.apply(this,arguments)}return n(o,t),o.prototype.save=function(t){return this.save_in_ajax(t,{on_success:function(t,e){return window.location.href=e.getResponseHeader("location")}})},o}(Locomotive.Views.Pages.FormView)}.call(this),function(){var t,e,o,n={}.hasOwnProperty,i=function(t,e){function o(){this.constructor=t}for(var i in e)n.call(e,i)&&(t[i]=e[i]);return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t};(t=Locomotive.Views).Shared||(t.Shared={}),(e=Locomotive.Views.Shared).Fields||(e.Fields={}),Locomotive.Views.Shared.Fields.FileView=function(t){function e(){return o=e.__super__.constructor.apply(this,arguments)}return i(e,t),e.prototype.tagName="span",e.prototype.className="file",e.prototype.states={change:!1,"delete":!1},e.prototype.events={"click a.change":"toggle_change","click a.delete":"toggle_delete"},e.prototype.template=function(){return ich[""+this.options.name+"_file_input"]},e.prototype.render=function(){var t,e,o=this;return e=this.model.get(""+this.options.name+"_url")||"",t={filename:e.split("/").pop(),url:e},$(this.el).html(this.template()(t)),this.$("input[type=file]").bind("change",function(t){var e,n,i;return n=$(t.target)[0],null!=n.files?(i=$(n).attr("name"),e={},e[i.replace(""+o.model.paramRoot+"[","").replace(/]$/,"")]=n.files[0],o.model.set(e)):void 0}),this},e.prototype.refresh=function(){return this.$("input[type=file]").unbind("change"),this.states={change:!1,"delete":!1},this.render()},e.prototype.reset=function(){return this.model.set_attribute(this.options.name,null),this.model.set_attribute(""+this.options.name+"_url",null),this.refresh()},e.prototype.toggle_change=function(t){var e=this;return this._toggle(t,"change",{on_change:function(){return e.$("a:first").hide()&e.$("input[type=file]").show()&e.$("a.delete").hide()},on_cancel:function(){return e.$("a:first").show()&e.$("input[type=file]").hide()&e.$("a.delete").show()}})},e.prototype.toggle_delete=function(t){var e=this;return this._toggle(t,"delete",{on_change:function(){return e.$("a:first").addClass("deleted")&e.$("a.change").hide(),e.$("input[type=hidden].remove-flag").val("1"),e.model.set_attribute("remove_"+e.options.name,!0)},on_cancel:function(){return e.$("a:first").removeClass("deleted")&e.$("a.change").show(),e.$("input[type=hidden].remove-flag").val("0"),e.model.set_attribute("remove_"+e.options.name,!1)}})},e.prototype._toggle=function(t,e,o){var n,i;return t.stopPropagation()&t.preventDefault(),n=$(t.target),i=n.attr("data-alt-label"),this.states[e]?o.on_cancel():o.on_change(),n.attr("data-alt-label",n.html()),n.html(i),this.states[e]=!this.states[e]},e.prototype.remove=function(){return this.$("input[type=file]").unbind("change"),e.__super__.remove.apply(this,arguments)},e}(Backbone.View)}.call(this),function(){var t,e,o,n=function(t,e){return function(){return t.apply(e,arguments)}},i={}.hasOwnProperty,r=function(t,e){function o(){this.constructor=t}for(var n in e)i.call(e,n)&&(t[n]=e[n]);return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t};(t=Locomotive.Views).Shared||(t.Shared={}),(e=Locomotive.Views.Shared).Fields||(e.Fields={}),Locomotive.Views.Shared.Fields.HasManyView=function(t){function e(){return this.get_entry_from_element=n(this.get_entry_from_element,this),o=e.__super__.constructor.apply(this,arguments)}return r(e,t),e.prototype.tagName="div",e.prototype.className="list",e.prototype.events={"click p.actions a.add":"open_new_entry_view","click ul span.actions a.edit":"edit_entry","click ul span.actions a.remove":"remove_entry"},e.prototype.template=function(){return ich[""+this.options.name+"_list"]},e.prototype.entry_template=function(){return ich[""+this.options.name+"_entry"]},e.prototype.initialize=function(){return _.bindAll(this,"refresh_position_entries"),this.collection=this.model.get(this.options.name),this.build_target_entry_view()},e.prototype.render=function(){return $(this.el).html(this.template()()),this.insert_entries(),this.make_entries_sortable(),this},e.prototype.ui_enabled=function(){return null!=this.template()},e.prototype.insert_entries=function(){var t=this;return this.collection.length>0?this.collection.each(function(e){return t.insert_entry(e)}):this.$(".empty").show()},e.prototype.insert_entry=function(t){var e;return null==this.collection.get(t.get("_id"))&&this.collection.add(t),this.$(".empty").hide(),e=$(this.entry_template()({label:t.get("_label")})),e.data("data-entry-id",t.id),this.$("> ul").append(e)},e.prototype.make_entries_sortable=function(){return this.sortable_list=this.$("> ul").sortable({handle:".handle",items:"li",axis:"y",update:this.refresh_position_entries})},e.prototype.refresh_position_entries=function(){var t=this;return this.$("> ul > li").each(function(e,o){var n,i;return i=$(o).data("data-entry-id"),n=t.collection.get(i),n.set_attribute("position_in_"+t.options.inverse_of,e)})},e.prototype.build_target_entry_view=function(){return this.target_entry_view=new Locomotive.Views.ContentEntries.PopupFormView({el:$("#"+this.options.name+"-template-entry"),parent_view:this,model:this.options.new_entry.clone()}),this.target_entry_view.render()},e.prototype.edit_entry=function(t){var e;return t.stopPropagation()&t.preventDefault(),e=this.get_entry_from_element($(t.target)),this.target_entry_view.reset(e),this.target_entry_view.open()},e.prototype.update_entry=function(t){var e,o;return e=$(_.detect(this.$("> ul > li"),function(e){return $(e).data("data-entry-id")===t.id})),this.collection.get(t.id).set(t.attributes),o=$(this.entry_template()({label:t.get("_label")})),o.data("data-entry-id",t.id),e.replaceWith(o)},e.prototype.insert_or_update_entry=function(t){return null!=this.collection.get(t.id)?this.update_entry(t):this.insert_entry(t)},e.prototype.remove_entry=function(t){var e;return t.stopPropagation()&t.preventDefault(),confirm($(t.target).attr("data-confirm"))?(e=this.get_entry_from_element($(t.target)),e.set({_destroy:!0}),$(t.target).closest("li").remove(),0===this.$("> ul > li").size()&&this.$(".empty").show(),this.refresh_position_entries()):void 0},e.prototype.open_new_entry_view=function(t){return t.stopPropagation()&t.preventDefault(),this.target_entry_view.reset(this.options.new_entry.clone()),this.target_entry_view.open()},e.prototype.get_entry_from_element=function(t){var e,o;return e=$(t).closest("li"),o=$(e).data("data-entry-id"),this.collection.get(o)},e}(Backbone.View)}.call(this),function(){var t,e,o,n={}.hasOwnProperty,i=function(t,e){function o(){this.constructor=t}for(var i in e)n.call(e,i)&&(t[i]=e[i]);return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t};(t=Locomotive.Views).Shared||(t.Shared={}),(e=Locomotive.Views.Shared).Fields||(e.Fields={}),Locomotive.Views.Shared.Fields.ManyToManyView=function(t){function e(){return o=e.__super__.constructor.apply(this,arguments)}return i(e,t),e.prototype.tagName="div",e.prototype.className="list",e.prototype.events={"click .new-entry a.add":"add_entry","keypress .new-entry select":"add_entry","click ul span.actions a.remove":"remove_entry"},e.prototype.template=function(){return ich[""+this.options.name+"_list"]},e.prototype.entry_template=function(){return ich[""+this.options.name+"_entry"]},e.prototype.initialize=function(){return _.bindAll(this,"refresh_position_entries"),this.collection=this.model.get(this.options.name),this.all_entries=this.options.all_entries},e.prototype.render=function(){return $(this.el).html(this.template()()),this.insert_entries(),this.make_entries_sortable(),this.refresh_select_field(),this},e.prototype.ui_enabled=function(){return null!=this.template()},e.prototype.insert_entries=function(){var t=this;return this.collection.length>0?this.collection.each(function(e){return t.insert_entry(e)}):this.$(".empty").show()},e.prototype.insert_entry=function(t){var e;return null==this.collection.get(t.get("_id"))&&this.collection.add(t),this.$(".empty").hide(),e=$(this.entry_template()({label:t.get("_label")})),e.data("data-entry-id",t.id),this.$("> ul").append(e)},e.prototype.make_entries_sortable=function(){return this.sortable_list=this.$("> ul").sortable({handle:".handle",items:"li",axis:"y",update:this.refresh_position_entries})},e.prototype.refresh_position_entries=function(){var t=this;return this.$("> ul > li").each(function(e,o){var n,i;return i=$(o).data("data-entry-id"),n=t.collection.get(i),n.set_attribute("__position",e)})},e.prototype.add_entry=function(t){var e,o;return t.stopPropagation()&t.preventDefault(),o=this.$(".new-entry select").val(),e=this.get_entry_from_id(o),null!=e?(this.insert_entry(e),this.refresh_select_field()):void 0},e.prototype.remove_entry=function(t){var e;return t.stopPropagation()&t.preventDefault(),confirm($(t.target).attr("data-confirm"))?(e=this.get_entry_from_element($(t.target)),this.collection.remove(e),$(t.target).closest("li").remove(),0===this.$("> ul > li").size()&&this.$(".empty").show(),this.refresh_position_entries()&this.refresh_select_field()):void 0},e.prototype.refresh_select_field=function(){var t=this;return this.$(".new-entry select optgroup, .new-entry select option").remove(),_.each(this.all_entries,function(e){var o,n;return _.isArray(e.entries)?(o=$("<optgroup/>").attr("label",e.name),_.each(e.entries,function(e){var n;return null==t.collection.get(e._id)?(n=new Option(e._label,e._id,!1),o.append(n)):void 0}),t.$(".new-entry select").append(o)):null==t.collection.get(e._id)?(n=new Option(e._label,e._id,!1),t.$(".new-entry select").append(n)):void 0})},e.prototype.get_entry_from_element=function(t){var e,o;return e=$(t).closest("li"),o=$(e).data("data-entry-id"),this.collection.get(o)},e.prototype.get_entry_from_id=function(t){var e;return e=null,_.each(this.all_entries,function(o){return _.isArray(o.entries)?e||(e=_.detect(o.entries,function(e){return e._id===t})):o._id===t?e=o:void 0}),null!=e?new Locomotive.Models.ContentEntry(e):null},e}(Backbone.View)}.call(this),function(){var t,e,o,n=function(t,e){return function(){return t.apply(e,arguments)}},i={}.hasOwnProperty,r=function(t,e){function o(){this.constructor=t}for(var n in e)i.call(e,n)&&(t[n]=e[n]);return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t};(t=Locomotive.Views).Shared||(t.Shared={}),(e=Locomotive.Views.Shared).Fields||(e.Fields={}),Locomotive.Views.Shared.Fields.SelectView=function(t){function e(){return this.on_save=n(this.on_save,this),o=e.__super__.constructor.apply(this,arguments)}return r(e,t),e.prototype.el="#edit-select-option-entries",e.prototype.select_options_view=null,e.prototype.initialize=function(){return _.bindAll(this,"save","on_save"),this.create_dialog(),e.__super__.initialize.call(this)},e.prototype.render=function(){return this.render_select_options_view(),this.open()},e.prototype.render_for=function(t,e){var o=this;return this.name=t,this.on_save_callback=e,this.custom_field=this.model.get("entries_custom_fields").find(function(t){return t.get("name")===o.name}),this.render()},e.prototype.create_dialog=function(){var t=this;return this.dialog=$(this.el).dialog({autoOpen:!1,modal:!0,zIndex:window.application_view.unique_dialog_zindex(),width:770,create:function(){return $(t.el).prev().find(".ui-dialog-title").html(t.$("h2").html()),t.$("h2").remove(),t.$form=t.$(".placeholder").formSubmitNotification(),t.$buttons_pane=t.$(".dialog-actions").appendTo($(t.el).parent()).addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),t.$buttons_pane.find("#close-link").click(function(e){return t.close(e)}),t.$buttons_pane.find("input[type=submit]").click(t.save)},open:function(){return $(t.el).dialog("overlayEl").bind("click",function(){return t.close()})}})},e.prototype.save=function(t){return t.stopPropagation()&t.preventDefault(),this.$form.trigger("ajax:beforeSend"),$.rails.disableFormElements(this.$buttons_pane),this.model.save({},{success:this.on_save,error:this.on_save})},e.prototype.on_save=function(t){return $.rails.enableFormElements(this.$buttons_pane),t._normalize(),this.$form.trigger("ajax:complete"),null!=this.on_save_callback&&this.on_save_callback(this.custom_field.get("select_options").sortBy(function(t){return t.get("position")})),this.close()},e.prototype.render_select_options_view=function(){return null!=this.select_options_view&&this.select_options_view.remove(),this.select_options_view=new Locomotive.Views.ContentTypes.SelectOptionsView({model:this.custom_field,collection:this.custom_field.get("select_options")}),this.$(".placeholder").append(this.select_options_view.render().el)},e.prototype.open=function(){return $(this.el).dialog("open")},e.prototype.close=function(t){return null!=t&&t.stopPropagation()&t.preventDefault(),$(this.el).dialog("overlayEl").unbind("click"),$(this.el).dialog("close")},e.prototype.center=function(){return $(this.el).dialog("option","position","center")},e}(Backbone.View)}.call(this),function(){var t,e,o={}.hasOwnProperty,n=function(t,e){function n(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};(t=Locomotive.Views).Shared||(t.Shared={}),Locomotive.Views.Shared.ListItemView=function(t){function o(){return e=o.__super__.constructor.apply(this,arguments)}return n(o,t),o.prototype.tagName="li",o.prototype.events={"click a.remove":"remove_item"},o.prototype.template=function(){},o.prototype.render=function(){return $(this.el).html(this.template()(this.model.toJSON())),this},o.prototype.remove_item=function(t){return t.stopPropagation()&t.preventDefault(),confirm($(t.target).attr("data-confirm"))?this.model.destroy():void 0},o}(Backbone.View)}.call(this),function(){var t,e,o={}.hasOwnProperty,n=function(t,e){function n(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};(t=Locomotive.Views).Shared||(t.Shared={}),Locomotive.Views.Shared.ListView=function(t){function o(){return e=o.__super__.constructor.apply(this,arguments)}var i;return n(o,t),o.prototype.tagName="div",i=[],o.prototype.initialize=function(){return _.bindAll(this,"insert_item","remove_item"),this.collection.bind("add",this.insert_item),this.collection.bind("remove",this.remove_item)},o.prototype.template=function(){},o.prototype.item_view_class=function(){},o.prototype.render=function(){return $(this.el).html(this.template()()),this.render_items(),this},o.prototype.render_items=function(){var t=this;return 0===this.collection.length?this.$(".no-items").show():this.collection.each(function(e){return t.insert_item(e)})},o.prototype.insert_item=function(t){var e,o;return e=this.item_view_class(),o=new e({model:t,parent_view:this}),(this._item_views||(this._item_views=[])).push(o),this.$(".no-items").hide(),this.$("ul").append(o.render().el)},o.prototype.remove_item=function(t){var e;return 0===this.collection.length&&this.$(".no-items").show(),e=_.find(this._item_views,function(e){return e.model===t}),null!=e?e.remove():void 0},o.prototype.remove=function(){return _.each(this._item_views,function(t){return t.remove()}),o.__super__.remove.apply(this,arguments)},o}(Backbone.View)}.call(this),function(){var t,e,o={}.hasOwnProperty,n=function(t,e){function n(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};(t=Locomotive.Views).Sites||(t.Sites={}),Locomotive.Views.Sites.DomainEntryView=function(t){function o(){return e=o.__super__.constructor.apply(this,arguments)}return n(o,t),o.prototype.tagName="li",o.prototype.className="domain",o.prototype.events={"change input[type=text]":"change","click a.remove":"remove"},o.prototype.render=function(){return $(this.el).html(ich.domain_entry(this.model.toJSON())),this},o.prototype.change=function(t){var e;return e=$(t.target).val(),this.options.parent_view.change_entry(this.model,e)},o.prototype.remove=function(t){return t.stopPropagation()&t.preventDefault(),this.$("input[type=text]").editableField("destroy"),this.options.parent_view.remove_entry(this.model),o.__super__.remove.call(this)},o}(Backbone.View)}.call(this),function(){var t,e,o={}.hasOwnProperty,n=function(t,e){function n(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};(t=Locomotive.Views).Sites||(t.Sites={}),Locomotive.Views.Sites.MembershipEntryView=function(t){function o(){return e=o.__super__.constructor.apply(this,arguments)}return n(o,t),o.prototype.className="entry",o.prototype.events={"change select":"change","click a.remove":"remove"},o.prototype.render=function(){var t;return t=this.model.toJSON(),t.index=this.options.index,$(this.el).html(ich.membership_entry(t)),$(this.el).attr("data-role",this.model.get("role")),this.$("select").val(this.model.get("role")),this},o.prototype.change=function(t){var e;return e=$(t.target).val(),this.options.parent_view.change_entry(this.model,e)},o.prototype.remove=function(t){return t.stopPropagation()&t.preventDefault(),this.$("select").editableField("destroy"),this.options.parent_view.remove_entry(this.model),o.__super__.remove.call(this)},o}(Backbone.View)}.call(this),function(){var t,e,o={}.hasOwnProperty,n=function(t,e){function n(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};(t=Locomotive.Views).Sites||(t.Sites={}),Locomotive.Views.Sites.MembershipsView=function(t){function o(){return e=o.__super__.constructor.apply(this,arguments)
}var i;return n(o,t),o.prototype.tagName="div",o.prototype.className="list",i=[],o.prototype.render=function(){return this.render_entries(),this.enable_ui_effects(),this},o.prototype.change_entry=function(t,e){return t.set({role:e})},o.prototype.remove_entry=function(t){return t.set({_destroy:!0})},o.prototype.render_entries=function(){var t=this;return this.model.get("memberships").each(function(e,o){return t._insert_entry(e,o)})},o.prototype.enable_ui_effects=function(){return this.$(".entry select").editableField()},o.prototype._insert_entry=function(t,e){var o;return o=new Locomotive.Views.Sites.MembershipEntryView({model:t,parent_view:this,index:e}),(this._entry_views||(this._entry_views=[])).push(o),$(this.el).append(o.render().el)},o}(Backbone.View)}.call(this),function(){var t,e,o={}.hasOwnProperty,n=function(t,e){function n(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};(t=Locomotive.Views).Sites||(t.Sites={}),Locomotive.Views.Sites.NewView=function(t){function o(){return e=o.__super__.constructor.apply(this,arguments)}return n(o,t),o.prototype.el="#content",o.prototype.events={submit:"save"},o.prototype.initialize=function(){return this.model=new Locomotive.Models.Site,Backbone.ModelBinding.bind(this)},o.prototype.render=function(){return o.__super__.render.call(this),this.render_domains()},o.prototype.render_domains=function(){return this.domains_view=new Locomotive.Views.Sites.DomainsView({model:this.model,errors:this.options.errors}),this.$("#site_domains_input label").after(this.domains_view.render().el)},o.prototype.save=function(t){return this.save_in_ajax(t,{on_success:function(t,e){return window.location.href=e.getResponseHeader("location")}})},o.prototype.show_error=function(t,e){return"domains"===t?this.domains_view.show_error(e):o.__super__.show_error.apply(this,arguments)},o.prototype.remove=function(){return this.domains_view.remove(),o.__super__.remove.apply(this,arguments)},o}(Locomotive.Views.Shared.FormView)}.call(this),function(){var t,e,o={}.hasOwnProperty,n=function(t,e){function n(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};(t=Locomotive.Views).Snippets||(t.Snippets={}),Locomotive.Views.Snippets.FormView=function(t){function o(){return e=o.__super__.constructor.apply(this,arguments)}return n(o,t),o.prototype.el="#content",o.prototype.events={"click    a#image-picker-link":"open_image_picker",submit:"save"},o.prototype.initialize=function(){return _.bindAll(this,"insert_image"),this.model=new Locomotive.Models.Snippet(this.options.snippet),this.image_picker_view=new Locomotive.Views.ThemeAssets.ImagePickerView({collection:new Locomotive.Models.ThemeAssetsCollection,on_select:this.insert_image}),this.image_picker_view.render(),Backbone.ModelBinding.bind(this)},o.prototype.render=function(){return o.__super__.render.call(this),this.slugify_name(),this.enable_liquid_editing(),this},o.prototype.slugify_name=function(){return this.$("#snippet_name").slugify({target:this.$("#snippet_slug")})},o.prototype.open_image_picker=function(t){return t.stopPropagation()&t.preventDefault(),this.image_picker_view.editor=this.editor,this.image_picker_view.fetch_assets()},o.prototype.insert_image=function(t){var e;return e="{{ '"+t+"' | theme_image_url }}",this.editor.replaceSelection(e),this.image_picker_view.close()},o.prototype.enable_liquid_editing=function(){var t,e=this;return t=this.$("#snippet_template"),this.editor=CodeMirror.fromTextArea(t.get()[0],{mode:"liquid",autoMatchParens:!1,lineNumbers:!1,passDelay:50,tabMode:"shift",theme:"default medium",onChange:function(t){return e.model.set({template:t.getValue()})}})},o.prototype.after_inputs_fold=function(){return this.editor.refresh()},o}(Locomotive.Views.Shared.FormView)}.call(this),function(){var t,e,o={}.hasOwnProperty,n=function(t,e){function n(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};(t=Locomotive.Views).Snippets||(t.Snippets={}),Locomotive.Views.Snippets.EditView=function(t){function o(){return e=o.__super__.constructor.apply(this,arguments)}return n(o,t),o.prototype.save=function(t){return this.save_in_ajax(t)},o}(Locomotive.Views.Snippets.FormView)}.call(this),function(){var t,e,o={}.hasOwnProperty,n=function(t,e){function n(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};(t=Locomotive.Views).Snippets||(t.Snippets={}),Locomotive.Views.Snippets.ListItemView=function(t){function o(){return e=o.__super__.constructor.apply(this,arguments)}return n(o,t),o.prototype.template=function(){return ich.snippet_item},o}(Locomotive.Views.Shared.ListItemView)}.call(this),function(){var t,e,o={}.hasOwnProperty,n=function(t,e){function n(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};(t=Locomotive.Views).Snippets||(t.Snippets={}),Locomotive.Views.Snippets.ListView=function(t){function o(){return e=o.__super__.constructor.apply(this,arguments)}return n(o,t),o.prototype.className="box",o.prototype.initialize=function(){return this.collection=new Locomotive.Models.SnippetsCollection(this.options.collection),o.__super__.initialize.apply(this,arguments)},o.prototype.template=function(){return ich.snippets_list},o.prototype.item_view_class=function(){return Locomotive.Views.Snippets.ListItemView},o}(Locomotive.Views.Shared.ListView)}.call(this),function(){var t,e,o={}.hasOwnProperty,n=function(t,e){function n(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};(t=Locomotive.Views).Snippets||(t.Snippets={}),Locomotive.Views.Snippets.NewView=function(t){function o(){return e=o.__super__.constructor.apply(this,arguments)}return n(o,t),o.prototype.save=function(t){return this.save_in_ajax(t,{on_success:function(t,e){return window.location.href=e.getResponseHeader("location")}})},o}(Locomotive.Views.Snippets.FormView)}.call(this),function(){var t,e,o={}.hasOwnProperty,n=function(t,e){function n(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};(t=Locomotive.Views).ThemeAssets||(t.ThemeAssets={}),Locomotive.Views.ThemeAssets.FormView=function(t){function o(){return e=o.__super__.constructor.apply(this,arguments)}return n(o,t),o.prototype.el="#content",o.prototype.events={"click    a#image-picker-link":"open_image_picker",submit:"save"},o.prototype.initialize=function(){return _.bindAll(this,"insert_image"),this.model=new Locomotive.Models.ThemeAsset(this.options.theme_asset),this.image_picker_view=new Locomotive.Views.ThemeAssets.ImagePickerView({on_select:this.insert_image}),this.image_picker_view.render(),Backbone.ModelBinding.bind(this)},o.prototype.render=function(){return o.__super__.render.call(this),this.enable_toggle_between_file_and_text(),this.enable_source_editing(),this.bind_source_mode(),this.enable_source_file(),this},o.prototype.enable_toggle_between_file_and_text=function(){var t=this;return this.$("div.hidden").hide(),this.model.set({performing_plain_text:this.$("#theme_asset_performing_plain_text").val()}),this.$(".selector > a.alt").click(function(e){return e.stopPropagation()&e.preventDefault(),t.$("#file-selector").is(":hidden")?t.$("#text-selector").slideUp("normal",function(){return t.$("#file-selector").slideDown(),t.model.set({performing_plain_text:!1}),t.$("input#theme_asset_performing_plain_text").val(!1)}):t.$("#file-selector").slideUp("normal",function(){return t.$("#text-selector").slideDown("normal",function(){return t.editor.refresh()}),t.model.set({performing_plain_text:!0}),t.$("#theme_asset_performing_plain_text").val(!0)})})},o.prototype.enable_source_file=function(){var t=this;return this.$(".formtastic #theme_asset_source").bind("change",function(e){var o;return o=$(e.target)[0],null!=o.files?t.model.set({source:o.files[0]}):void 0})},o.prototype.show_error=function(t,e,n){switch(t){case"source":return this.$(this.model.get("performing_plain_text")?"#theme_asset_plain_text_input .CodeMirror":"#theme_asset_source").after(n);default:return o.__super__.show_error.apply(this,arguments)}},o.prototype.open_image_picker=function(t){return t.stopPropagation()&t.preventDefault(),this.image_picker_view.editor=this.editor,this.image_picker_view.fetch_assets()},o.prototype.insert_image=function(t){var e;return e="'"+t+"'",this.editor.replaceSelection(e),this.image_picker_view.close()},o.prototype.source_mode=function(){return"javascript"===this.model.get("plain_text_type")?"javascript":"css"},o.prototype.enable_source_editing=function(){var t,e=this;return t=this.$("#theme_asset_plain_text"),0!==t.size()?this.editor=CodeMirror.fromTextArea(t.get()[0],{mode:this.source_mode(),autoMatchParens:!1,lineNumbers:!1,passDelay:50,tabMode:"shift",theme:"default",onChange:function(t){return e.model.set({plain_text:t.getValue()})}}):void 0},o.prototype.bind_source_mode=function(){var t=this;return this.$("#theme_asset_plain_text_type").bind("change",function(){return t.editor.setOption("mode",t.source_mode())})},o.prototype.after_inputs_fold=function(){return null!=this.editor?this.editor.refresh():void 0},o}(Locomotive.Views.Shared.FormView)}.call(this),function(){var t,e,o={}.hasOwnProperty,n=function(t,e){function n(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};(t=Locomotive.Views).ThemeAssets||(t.ThemeAssets={}),Locomotive.Views.ThemeAssets.EditView=function(t){function o(){return e=o.__super__.constructor.apply(this,arguments)}return n(o,t),o.prototype.save=function(t){var e=this;return this.save_in_ajax(t,{on_success:function(t,o){var n;return window.response=t,window.xhr=o,n=e.$(".inner > p.help"),n.find("b").html(t.dimensions),n.find("a").html(t.url).attr("href",t.url),window.editor=e.editor,null!=t.plain_text?e.editor.setValue(t.plain_text):void 0}})},o}(Locomotive.Views.ThemeAssets.FormView)}.call(this),function(){var t,e,o={}.hasOwnProperty,n=function(t,e){function n(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};(t=Locomotive.Views).ThemeAssets||(t.ThemeAssets={}),Locomotive.Views.ThemeAssets.ImagePickerView=function(t){function o(){return e=o.__super__.constructor.apply(this,arguments)}return n(o,t),o.prototype.events={"click ul.list a":"select_asset"},o.prototype.initialize=function(){return this.collection||(this.collection=new Locomotive.Models.ThemeAssetsCollection),o.__super__.initialize.apply(this,arguments)},o.prototype.template=function(){return ich.theme_image_picker},o.prototype.fetch_assets=function(){var t=this;return this._reset(),this.collection.fetch({data:{content_type:"image"},success:function(){return t.open()}})},o.prototype.build_uploader=function(t,e){var o=this;return e.bind("click",function(e){return e.stopPropagation()&e.preventDefault(),t.click()}),t.bind("change",function(t){return _.each(t.target.files,function(t){var e;return e=new Locomotive.Models.ThemeAsset({source:t}),e.save({},{headers:{"X-Flash":!0},success:function(t){return o.collection.add(t)},error:function(){return o.shake()}})})})},o.prototype.select_asset=function(t){return t.stopPropagation()&t.preventDefault(),this.options.on_select?this.options.on_select($(t.target).html()):void 0},o.prototype.add_asset=function(t){return this.$("ul.list").append(ich.theme_asset(t.toJSON())),this._refresh()},o.prototype._reset=function(){return this.$("ul.list").empty()},o}(Locomotive.Views.Shared.AssetPickerView)}.call(this),function(){var t,e,o={}.hasOwnProperty,n=function(t,e){function n(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};(t=Locomotive.Views).ThemeAssets||(t.ThemeAssets={}),Locomotive.Views.ThemeAssets.IndexView=function(t){function o(){return e=o.__super__.constructor.apply(this,arguments)}return n(o,t),o.prototype.el="#content",o.prototype._lists_views=[],o.prototype.initialize=function(){return _.bindAll(this,"insert_asset")},o.prototype.render=function(){return this.build_uploader(),this.render_snippets(),this.render_images(),this.render_js_and_css(),this.render_fonts(),this.render_media(),this},o.prototype.build_uploader=function(){var t,e,o,n=this;return t=this.$("#theme-assets-quick-upload"),e=t.find("input[type=file]"),o=t.find("a.new"),t.formSubmitNotification(),o.bind("click",function(t){return t.stopPropagation()&t.preventDefault(),e.click()}),e.bind("change",function(e){return t.trigger("ajax:beforeSend"),_.each(e.target.files,function(e){var o;return o=new Locomotive.Models.ThemeAsset({source:e}),o.save({},{success:function(e){return t.trigger("ajax:complete"),n.insert_asset(e)},error:function(){return t.trigger("ajax:complete")},headers:{"X-Flash":!0}})})})},o.prototype.insert_asset=function(t){var e;return e=this.pick_list_view(t.get("content_type")),e.collection.add(t)},o.prototype.render_snippets=function(){return this.render_list("snippets",this.options.snippets,Locomotive.Views.Snippets.ListView)},o.prototype.render_images=function(){return this.render_list("images",this.options.images)},o.prototype.render_js_and_css=function(){return this.render_list("js-and-css",this.options.js_and_css_assets,Locomotive.Views.ThemeAssets.ListView,ich.js_and_css_list)},o.prototype.render_fonts=function(){return this.render_list("fonts",this.options.fonts,Locomotive.Views.ThemeAssets.ListView,ich.fonts_list)},o.prototype.render_media=function(){return this.render_list("media",this.options.media,Locomotive.Views.ThemeAssets.ListView,ich.media_list)},o.prototype.render_list=function(t,e,o,n){var i;if(0!==this.$("#"+t+"-anchor").size())return o||(o=Locomotive.Views.ThemeAssets.ListView),i=new o({collection:e,type:t}),null!=n&&(i.template=function(){return n}),this.$("#"+t+"-anchor").replaceWith(i.render().el),(this._lists_views||(this._lists_views=[])).push(i)},o.prototype.pick_list_view=function(t){var e;return e=function(){switch(t){case"image":return"images";case"javascript":case"stylesheet":return"js-and-css";case"media":return"media";case"font":return"fonts"}}(),_.find(this._lists_views,function(t){return t.options.type===e})},o.prototype.remove=function(){return _.each(this._lists_views,function(t){return t.remove()}),o.__super__.remove.apply(this,arguments)},o}(Backbone.View)}.call(this),function(){var t,e,o={}.hasOwnProperty,n=function(t,e){function n(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};(t=Locomotive.Views).ThemeAssets||(t.ThemeAssets={}),Locomotive.Views.ThemeAssets.ListItemView=function(t){function o(){return e=o.__super__.constructor.apply(this,arguments)}return n(o,t),o.prototype.template=function(){return ich.editable_theme_asset_item},o}(Locomotive.Views.Shared.ListItemView)}.call(this),function(){var t,e,o={}.hasOwnProperty,n=function(t,e){function n(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};(t=Locomotive.Views).ThemeAssets||(t.ThemeAssets={}),Locomotive.Views.ThemeAssets.ListView=function(t){function o(){return e=o.__super__.constructor.apply(this,arguments)}return n(o,t),o.prototype.className="box",o.prototype.initialize=function(){return this.collection=new Locomotive.Models.ThemeAssetsCollection(this.options.collection),o.__super__.initialize.apply(this,arguments)},o.prototype.template=function(){return ich.images_list},o.prototype.item_view_class=function(){return Locomotive.Views.ThemeAssets.ListItemView},o}(Locomotive.Views.Shared.ListView)}.call(this),function(){var t,e,o={}.hasOwnProperty,n=function(t,e){function n(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};(t=Locomotive.Views).ThemeAssets||(t.ThemeAssets={}),Locomotive.Views.ThemeAssets.NewView=function(t){function o(){return e=o.__super__.constructor.apply(this,arguments)}return n(o,t),o.prototype.save=function(t){return this.save_in_ajax(t,{on_success:function(t,e){return window.location.href=e.getResponseHeader("location")}})},o}(Locomotive.Views.ThemeAssets.FormView)}.call(this);